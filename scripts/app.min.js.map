{"version":3,"sources":["app.js","app.util.js","app.popup.js","app.dal.js","app.controller.js","app.login.js","app.controls.js"],"names":["cELM","tag","classes","innerHTML","e","document","createElement","className","isMobile","test","navigator","userAgent","getURLParameter","name","decodeURIComponent","RegExp","exec","location","search","replace","checkBrowserCompatibility","HtmlEncode","s","el","innerText","textContent","IsEmpty","str","length","contains","str1","str2","indexOf","RGBAObjToHex","color","r","parseInt","g","b","toString","GetScreenDim","w","window","d","documentElement","getElementsByTagName","x","innerWidth","clientWidth","y","innerHeight","clientHeight","width","height","LoadCSS","url","link","type","rel","href","h","i","children","c","appendChild","RemoveCSS","rm","p","parentNode","removeChild","guidGenerator","format","S4","Math","random","substring","URLFriendly","result","toLowerCase","URLFriendlyTags","setCookie","cname","cvalue","exdays","Date","setTime","getTime","expires","toGMTString","cookie","getCookie","re","value","unescape","getStoredKVP","key","localStorage","getItem","removeStoredKVP","removeItem","setStoredKVP","setItem","http","params","callback","n","prop","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","ex","open","verb","setRequestHeader","headers","data","send","stringify","httpGet","getURLParts","parts","pathname","split","push","getURLHashPath","hash","query","substr","forEach","part","getURLQueryParams","item","blobUI","t","types","existed","em","src","elm","blobsUI","blobs","k","app","Ext","out","arguments","obj","hasOwnProperty","Element","prototype","addELM","object","getHTML","this","insertELM","firstChild","insertBefore","removeELM","destroy","getELM","logout","path","User","setTimeout","reload","_LOGIN_PARAMS","Start","before","after","addEventListener","event","Init","FF","feature_flag","Controller","checkFeature","currentUser","sections","Parse","current","usect","get","overrideSections","sectionBadges","setFeatureFlags","ff","f","enabled","toUpperCase","getElementById","style","display","nameArea","profile","profileURL","nBtProfile","controls","ExpandButton","button_text","classname","selections","text","detailText","onclick","click","initLoginType","login","initSectionSelections","showSection","logo","popup","lPopup","_params","_mode","mode","contentType","content","Login","user","onLoginSuccess","id","getSessionToken","lastLoginPath","currentPath","loginPopup","isDisableClose","Popup","init","disableClosing","show","startLogin","String","hashCode","char","charCodeAt","toTitleCase","j","lowers","uppers","txt","charAt","_this","_content","_cParams","_isDisableClosing","_CLASS","_setCLASSNAME","cancelBubble","stopPropagation","popPopup","preventDefault","dt","dataTransfer","files","items","getData","saveEvent","onDropEvent","btBack","elmHeader","elmHeaderTitleContainer","elmHeaderTitle","readOnly","elmNotificationArea","_notificationElm","elmControls","elmContent","spacer","bool","body","setClass","header","title","ctrl","control","css","clearNotification","nt","setNotification","getTitle","cParams","additionalCSS","clearContent","isShown","hide","unlockWindow","sc","cnorg","hasState","isFullScreen","state","history","pushPopup","lockWindow","DAL","getObjectFromParse","parseObj","attributes","objectId","setParseObject","set","loginSocial","email","password","success","error","logIn","Cloud","run","er","logOut","signUp","pw","ep","console","log","_doc","_getElmById","_getElmByClass","getElementsByClassName","PATHS","HOST","AUTH_PATH","SECTION_PATH","MODULE_PATH","LIB_PATH","CSS_PATH","_windowPosition","_popupStacks","_popupListener","_sectionParams","_currentSection","_sections","_modules","_stateCursor","_states","_stateListeners","_onWindowStateChange","_onStateChange","_getCurrentState","_moveStateCursor","cnt","isHttpProtocol","protocol","_SectionNavButtons","_SectionNavBadges","_popover","_isInitPopovers","_featureFlags","_loadSection","sName","container","defaultPath","host","titleArea","hs","ht","querySelector","param","buttonId","badge","_renderSection","require","section","isLogin","render","err","Mod","RegMods","Paths","paths","module","lib","auth","RegMod","mod","names","moduleNames","mName","Bind","componentsNames","objects","isNaN","uicomponent","moduleName","ext","State","opath","target","isFound","uid","warn","v","urlParts","partsIdx","defaultSection","n1","n2","nm","pt","splitparts","back","forward","go","pushState","replaceState","func","become","token","then","alert","flags","self","pageXOffset","scrollLeft","pageYOffset","scrollTop","html","overflow","scrollTo","scrollPosition","showPopover","pc","getControls","opc","rec","getBoundingClientRect","prec","offset","prm","getParams","disableAutoPlacement","top","scrollY","left","scrollX","handleExpandEvent","expandButtons","handle","registerExpand","getVisiblePopover","closePopovers","objectHash","isPopup","currentState","pop","sectionNames","onscroll","fs","footer","ul","anc","bt","hasBadge","_CTRL","initSectionName","loc","st","csec","clear","bId","sec","mods","completeLogin","authPath","_isOAuthOnly","_OAuthState","isOAuthOnly","OAuthState","onLoginSignUp","msgArea","txtUsername","setAttribute","txtPassword","txtFullname","txtTitle","txtNote","btForgot","btSwitch","btAction","aSocialLogin","btGmail","btFacebook","btTwitter","swithMode","m","visibility","tt","start","showControls","signup","loginOrSignup","keyCode","isShow","hideControls","complete","forgot","code","message","google","facebook","twitter","or","hasName","Selections","config","SelectionHeader","_onAdd","onAdd","_onFocus","onFocus","_onBlur","onBlur","_onKeyup","onKeyup","loading","input","btAdd","btOK","_completeAdd","results","_start","_adding","blur","focus","onkeyup","onkeypress","reset","onfocus","onblur","SelectionSearchHeader","_onSearch","onSearch","_onFilter","onFilter","btSearch","isFirstFocus","_completeSearch","_searching","SelectionItem","_data","_isSelect","isSelected","_template","template","_onSelect","onSelect","update","select","isSelect","_items","_config","_selectedItems","_unSelectedItems","_selectionSessionData","_getData","_finishedSelection","finishedSelection","_addData","addData","_searchData","searchData","_onShow","onShow","_onDone","onDone","_onSelectHandler","_footer","_originalData","_itemTemplate","itemTemplate","cssName","content_scroll","loadingSpinner","plcHolder","emptyMessage","addingElm","btDone","_refreshData","_addEntry","isInsert","_id","newLists","_showOriginalData","newList","_clearData","headerTemplate","getSelections","session","selected","unselected","disableContent","finish","setSessionData","sdata","BindInputsToData","_css","_onChange","onChange","onDelete","_allInputElms","_allRowElms","_elm","dom","_change","data_type","getAttribute","data_value","data_table_column","rowIdx","source","column","checked","rowData","guid","removeIdx","splice","options","selectedIndex","dValue","groupname","relatedInputs","querySelectorAll","ri","relatedInput","rSource","undefined","bindInput","element","attribute","prefixHash","qs","inputs","q","inps","data_column","inp","onchange","refHash","tb","tables","onAddRow","idx","row","cloneNode","childNodes","nodeName","btDelete","deleteIdx","rowTemplate","_setInputValue","dateInputValue","dataSet","updatedTables","Array","isArray","diff","l","abs","rowElm","rProp","rowItemValue","pickerHash","trim","BindModelToInputs","model","Object","call","subProp","_isClosing","_isShowing","_showingTimer","_closingTimer","_resizeTimer","main_button","expand","glocalClassname","a2","spacing","_onResize","_onScroll","selection","reference","button","onmousedown","icon","backgroundImage","dtxt","a1","clearTimeout","triggerOnMouseEnter","onmouseenter","onmouseleave","autoClose","ProgressBar","bar","barLabel","percent","Segment","_segElms","clearSelect","segments","segD","sg","label"],"mappings":"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","file":"app.min.js","sourcesContent":["/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// top-level namespace being assigned an object literal\nvar app = app || {};\n\n//core framework functions  --------------------------\napp.Ext = function(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n      continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (typeof obj[key] === 'object')\n          out[key] = app.Ext(out[key], obj[key]);\n        else\n          out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\nElement.prototype.addELM = function(object) {\n  var elm = object;\n  if (object.getHTML) {\n    elm = object.getHTML();\n  }\n  return (this.appendChild(elm));\n}\nElement.prototype.insertELM = function(object)\n{ //Insert into top of stack\n\n    var elm = object;\n\n        \n    if(object.getHTML)\n    {\n      elm = object.getHTML();\n    }\n    \n    var firstChild = this.firstChild;\n    if(firstChild)\n    {\n      return (this.insertBefore(elm, firstChild));\n    }\n    else\n    {\n      return(this.appendChild(elm));\n    }\n}\nElement.prototype.removeELM = function(object) {\n  var elm = object;\n  if (object.destroy) {\n    object.destroy();\n  }\n  if (object.getELM) {\n    elm = object.getELM();\n  }\n  return (this.removeChild(elm));\n}\n\nfunction cELM(tag,classes,innerHTML)\n{\n  var e = document.createElement(tag); \n  if (classes) {\n    e.className = classes;\n  };\n\n  if(innerHTML)\n    e.innerHTML = innerHTML;\n  \n  return e\n}\n\n//global auth / init functions --------------------------\n//AR TODO migrate to app?\n\n\nvar logout = function(path) {\n\n  app.User.logout();\n\n  setTimeout(function() {\n    if(path)\n    {\n      window.location.href = path;\n    }\n    else\n    {\n      location.reload();  \n    }\n    \n  }, 800);\n}\n\nvar _LOGIN_PARAMS = null;\n\n\napp.Start = function(params,before,after) {\n\n  document.addEventListener(\"DOMContentLoaded\", function(event) { \n    app.Init(params,before,after);\n  });\n\n}\napp.FF = function(feature_flag)\n{\n  return app.Controller.checkFeature(feature_flag);\n}\napp.Init = function(params,before,after) {\n\n  if(before)\n      if(!before())\n        return;\n\n  var sections = params.sections ? params.sections : {},\n      currentUser\n\n  if(window.hasOwnProperty('Parse'))\n    currentUser = Parse.User.current();\n\n  if(currentUser)\n  {\n    var usect = currentUser.get('sections');\n    var overrideSections = currentUser.get('overrideSections');\n    var sectionBadges = currentUser.get('sectionBadges');\n    app.Controller.sectionBadges = sectionBadges;\n    \n    app.Controller.setFeatureFlags({});\n    if(overrideSections && usect)\n    {\n      var ff = {};\n      for(var s in usect)\n      {\n        if(usect[s][\"features\"])\n        {\n          for(var f in usect[s][\"features\"])\n          {\n            var enabled = usect[s][\"features\"][f];\n            if(enabled)\n            {\n              ff[s.toUpperCase()+'-'+f.toUpperCase()] = true;  \n            }\n            \n          }\n        }\n      }\n      \n      app.Controller.setFeatureFlags(ff);\n    }\n\n    if(usect)\n      if(overrideSections)\n      {\n        sections = usect;\n      }\n      else\n      {\n        for(var s in usect)\n        {\n          sections[s] = usect[s];\n        }\n      }    \n  }\n\n  \n\n  if (document.getElementById('btLogin')) {\n    if (currentUser) {\n      document.getElementById('btLogin').style.display = 'none';\n\n      var nameArea = document.getElementById('username');\n      if(nameArea)\n        nameArea.innerHTML = currentUser.get(\"username\");\n\n      var profile = document.getElementById('userprofile');\n      if(profile)\n      {\n        var profileURL = currentUser.get(\"profileURL\");\n        if (!profileURL) {\n          profileURL = '/images/profile_default.png';\n        }\n\n        var nBtProfile = new app.controls.ExpandButton({\n          button_text: \"<img src=\" + profileURL + \">\",\n          classname: 'profile_nav',\n          selections: [{\n            classname: 'ep_logout',\n            text: 'Logout',\n            detailText: 'Signout of my current account',\n            onclick: function() {\n            logout();\n            }\n          }]\n        });\n\n        if(nameArea)\n          nameArea.onclick = function(e) {\n            nBtProfile.click(e);\n          }\n\n        profile.addELM(nBtProfile);\n      }\n\n\n    } \n    else {\n      if(document.getElementById('username'))\n        document.getElementById('username').style.display = 'none';\n      if(document.getElementById('userprofile'))\n        document.getElementById('userprofile').style.display = 'none';\n    }\n  }\n  else {\n    if(params)\n    {\n      if(params.login)\n      {\n        \n        initLoginType(params);      \n      }\n      else\n      {\n        initLoginType('login');    \n      }\n\n    }\n    else\n    {\n      initLoginType('login');\n    }\n  }\n\n  if(params)\n    if(params.login)\n    {\n      _LOGIN_PARAMS = params.login;\n\n    }\n\n  app.Controller.initSectionSelections(sections);\n  app.Controller.showSection();\n  \n  if(after)\n    after();\n}\n\n\nvar logo = function() {\n  window.location = '/';\n}\n\n//AR:todo clean up\nvar popup;\nvar lPopup;\nvar initLoginType = function(params) {\n\n  var _params = null;\n  var _mode = null;\n  if(typeof params === 'object')\n  {\n    _mode = params.login.mode;\n    _params = params;\n\n    _LOGIN_PARAMS = params.login;\n\n  }\n  else if(typeof params === 'string')\n  {\n    _mode = params; // type\n    _LOGIN_PARAMS = params;\n  }\n\n\n  var contentType = document.getElementById(_mode + '_page');\n  if (contentType) {\n    var content = new app.Login(_params ? _params.login : _mode, function(user) {\n      onLoginSuccess(user);\n    })\n    contentType.addELM(content);\n  }\n\n}\n\nvar onLoginSuccess = function(user) {\n\n  setCookie('userId', user.id, 325);\n  setCookie('session_token', user.getSessionToken(), 325);\n  //setCookie('username',user.get('fbUsername'),325);\n  setTimeout(function() {\n\n    var lastLoginPath = getCookie('lastLoginPath');\n\n    if(!IsEmpty(lastLoginPath))\n    {\n      if(lastLoginPath == 'null')\n      {\n        window.location = '/';\n      }\n      else\n      {\n        var currentPath = window.location.toString();\n        if(lastLoginPath.indexOf('#') > -1 && currentPath == lastLoginPath)\n        {\n          window.location.reload();\n          return;\n        }\n        else\n        {\n          window.location = lastLoginPath;\n        }\n      }\n    }\n    else\n    {\n      window.location = '/';  \n    }\n    \n  }, 800);\n}\n\n\n\nvar loginPopup = function(isDisableClose) {\n  lPopup = new app.Popup();\n\n\n  lPopup.init(new app.Login(_LOGIN_PARAMS, function(user) {\n    onLoginSuccess(user);\n  }));\n\n  if(isDisableClose)\n    lPopup.disableClosing(true);\n\n  lPopup.show(true);\n}\n\nvar startLogin = function() {\n\n\n  if(!lPopup)\n  {\n    lPopup = new app.Popup();\n      lPopup.init(new app.Login(_LOGIN_PARAMS, function(user) {\n        onLoginSuccess(user);\n      }));    \n  }\n  \n  lPopup.show(true);\n}\n","function isMobile()\n{\n\treturn /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) \n}\n\nfunction getURLParameter(name) {\n  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,\"\"])[1].replace(/\\+/g, '%20'))||null\n}\n\nfunction checkBrowserCompatibility()\n{\n\n}\n\nfunction HtmlEncode(s)\n{\n  var el = document.createElement(\"div\");\n  el.innerText = el.textContent = s;\n  s = el.innerHTML;\n  return s;\n}\n\nfunction IsEmpty(str) {\n\tif(typeof str == \"undefined\")\n\t\treturn true;\n\n    return (!str || 0 === str.length || /^\\s*$/.test(str));\n}\n\nfunction contains(str1,str2)\n{\n\treturn str1.indexOf(str2) != - 1;\n}\n\nfunction RGBAObjToHex(color)\n{\n\tvar r = parseInt(255*color.r);\n\tvar g = parseInt(255*color.g);\n\tvar b = parseInt(255*color.b);\n\n\t\n\treturn '#'+r.toString(16)+g.toString(16)+b.toString(16);\n\n}\n\nfunction GetScreenDim(){\n\tvar w = window,\n    d = document,\n    e = d.documentElement,\n    g = d.getElementsByTagName('body')[0],\n    x = w.innerWidth || e.clientWidth || g.clientWidth,\n    y = w.innerHeight|| e.clientHeight|| g.clientHeight;\n\n    return ({\n    \twidth:x,\n    \theight:y\n    })\n}\n\nfunction LoadCSS(url) {\n    var link = document.createElement(\"link\");\n    link.type = \"text/css\";\n    link.rel = \"stylesheet\";\n    link.href = url;\n\n    var h = false;\n    for(var i = 0; i < document.getElementsByTagName(\"head\")[0].children.length; i++)\n    {\n    \tvar c = document.getElementsByTagName(\"head\")[0].children[i];\n    \tif(c.href)\n    \tif(c.href.indexOf(url) > -1)\n    \t{\n    \t\th = true;\n    \t\tbreak;\n    \t}\t\n    }\n\n    if(!h)\n    \tdocument.getElementsByTagName(\"head\")[0].appendChild(link);\n}\n\nfunction RemoveCSS(url){\n\n\tvar rm = null;\n    for(var i = 0; i < document.getElementsByTagName(\"head\")[0].children.length; i++)\n    {\n    \tvar c = document.getElementsByTagName(\"head\")[0].children[i];\n    \tif(c.href)\n    \tif(c.href.indexOf(url) > -1)\n    \t{\n    \t\trm = c;\n    \t\tbreak;\n    \t}\t\n    }\n\n    if(rm)\n    {\n\t\tvar p = rm.parentNode;\n\t\tp.removeChild(rm);   \t\n    }\n\n}\n\nfunction guidGenerator(format) { \n\tvar S4 = function() {\n\t   return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t};\n\n\tswitch(format){\n\t\tcase \"short\":\n\t\t\treturn (S4()+S4());\n\t\tcase \"long\":\n\t\t\treturn (S4()+S4()+S4()+S4());\n\t\tdefault: // UUID v4\n\t\t\treturn (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n\t}\n\n}\nfunction URLFriendly(str)\n{\n\tif(!IsEmpty(str))\n\t{\n\t\tvar result = str.toLowerCase().replace(/^\\s+|\\s+$/g,'').replace(/[^a-zA-Z\\d\\s]/g, '').replace(/\\s/g,'-');\n\t    return(result);\n\t}\n\telse\n\t{\n\t\treturn \"\";\n\t}\n\n}\n\nfunction URLFriendlyTags(str)\n{\n\tvar result = str.toLowerCase().replace(/^\\s+|\\s+$/g,'').replace(/[^a-zA-Z\\d\\s]/g, '').replace(/\\s/g,'+');\n    return(result);\n}\nfunction setCookie(cname,cvalue,exdays)\n{\n\tvar d = new Date();\n\td.setTime(d.getTime()+(exdays*24*60*60*1000));\n\tvar expires = \"expires=\"+d.toGMTString();\n\t//document.cookie = cname + \"=\" + cvalue + \"; \" + expires +\";domain=app-dev.bestlyst.com:5000;path=/\";\n\tdocument.cookie = cname + \"=\" + cvalue + \"; \" + expires +\";path=/\";\n}\nfunction getCookie(name)\n{\n    var re = new RegExp(name + \"=([^;]+)\");\n    var value = re.exec(document.cookie);\n    return (value != null) ? unescape(value[1]) : null;\n}\nfunction getStoredKVP(key)\n{\n\tif(typeof(Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    \treturn localStorage.getItem(key);\n\t} else {\n\t    // Sorry! No Web Storage support..\n\t    return getCookie(key);\n\t}\n}\nfunction removeStoredKVP(key){\n\n\tif(typeof(Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    \tlocalStorage.removeItem(key);\n\t} else {\n\t    // Sorry! No Web Storage support..\n\t    setCookie(key,null,0);\n\t}\t\n}\nfunction setStoredKVP(key,value)\n{\n\tif(typeof(Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    \tlocalStorage.setItem(key, value);\n\t} else {\n\t    // Sorry! No Web Storage support..\n\t    setCookie(key,value,325);\n\n\t}\n}\nString.prototype.hashCode = function(){\n//http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\n\tvar hash = 0;\n\tif (this.length == 0) return hash;\n\tfor (i = 0; i < this.length; i++) {\n\t\tchar = this.charCodeAt(i);\n\t\thash = ((hash<<5)-hash)+char;\n\t\thash = hash & hash; // Convert to 32bit integer\n\t}\n\treturn hash;\n}\n\nString.prototype.toTitleCase = function() {\n  var i, j, str, lowers, uppers;\n  str = this.replace(/([^\\W_]+[^\\s-]*) */g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n\n  // Certain minor words should be left lowercase unless \n  // they are the first or last words in the string\n  lowers = ['A', 'An', 'The', 'And', 'But', 'Or', 'For', 'Nor', 'As', 'At', \n  'By', 'For', 'From', 'In', 'Into', 'Near', 'Of', 'On', 'Onto', 'To', 'With'];\n  for (i = 0, j = lowers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\s' + lowers[i] + '\\\\s', 'g'), \n      function(txt) {\n        return txt.toLowerCase();\n      });\n\n  // Certain words such as initialisms or acronyms should be left uppercase\n  uppers = ['Id', 'Tv'];\n  for (i = 0, j = uppers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\b' + uppers[i] + '\\\\b', 'g'), \n      uppers[i].toUpperCase());\n\n  return str;\n}\n\nfunction http(url, params,callback)\n{\n\tvar p = \"\";\n\tif(params.params)\n\t{\n\n\t\tvar n = new Date().getTime();\n\n\t\tfor(var prop in params.params)\n\t\t{\n\t\t\tp += p+'&'+prop+\"=\"+params.params[prop];\n\t\t}\n\n\t\tif(url.indexOf('?') > -1)\n\t\t{\n\t\t\tp = '&dt='+n+p;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tp = '?dt='+n+p;\n\t\t}\n\t}\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.onreadystatechange = function() { \n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\n        {\n        \ttry{\n        \t\tcallback(JSON.parse(xmlHttp.responseText));\n        \t}catch(ex){\n        \t\tcallback(xmlHttp.responseText);\n        \t}\n        \t\n        }\n    }\n    xmlHttp.open(params.verb, url+p, true); // true for asynchronous \n\n\tif(params.verb == 'PUT' || params.verb == 'POST')\n\t\txmlHttp.setRequestHeader('Content-Type', 'application/json');\n\n\n    if(params.headers)\n    {\n    \tfor(var prop in params.headers)\n\t\t{\n\t\t\txmlHttp.setRequestHeader(prop, params.headers[prop]);\n\t\t}\n\t}\n\t\n\tif(params.data)\n    \txmlHttp.send(JSON.stringify(params.data));\n\telse\n\t\txmlHttp.send(null);\n\n}\n\nfunction httpGet(url, params,callback)\n{\n\thttp(url,{verb:\"GET\",params:params},callback)\n}\n\nfunction getURLParts(url)\n{\n\tvar parts = [];\n\tvar result = {};\n\tvar p = url.pathname.split( '/' );\n\tfor(var i = 0; i < p.length; i++)\n\t{\n\t\tif(i > 0)\n\t\t\tif(!IsEmpty(p[i]))\n\t\t\t\tparts.push(p[i]);\n\t}\n\treturn parts;\t\n\t\n}\nfunction getURLHashPath(url){\n\n\tvar parts = [];\n\n\tif(url.hash) {\n\t\tquery = url.hash.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"/\").forEach(function(part) {\n\t\t\n\t\t\tparts.push(part);\n\t\t});\n\t\treturn parts;\t\n\t}\n\t\n\n\treturn parts\n\n}\nfunction getURLQueryParams(key,url) {\n\n\tvar query = {};\n\n\tif(url.hash) {\n\t\tquery = url.hash.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"&\").forEach(function(part) {\n\t\tvar item = part.split(\"=\");\n\t\t\tresult[item[0]] = decodeURIComponent(item[1]);\n\t\t});\n\t\treturn result;\t\t\n\t  // Fragment exists\n\t} else {\n\t\tquery = url.search.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"&\").forEach(function(part) {\n\t\tvar item = part.split(\"=\");\n\t\t\tresult[item[0]] = decodeURIComponent(item[1]);\n\t\t});\n\t\treturn result;\n\t}\n\n\n\n}\n//Render key value pairs to UI elements\nfunction blobUI(name,value,hash)\n{\n\tvar t = 'div';\n\tvar types = name.split('-');\n\n\tif(t.length > 1)\n\t{\n\t\tif(types[0] == 'img')\n\t\t\tt = 'img';\n\t}\n\t\n\tvar existed = false;\n\tvar em = null;\n\n\tif(!hash['blob-'+name])\n\t{\n\t\tem = cELM(t,name);\n\t\thash['blob-'+name] = em;\n\t}\n\telse\n\t{\n\t\tem = hash['blob-'+name];\n\t\texisted = true;\n\t}\n\n\tif(t == 'img')\n\t\thash['blob-'+name].src = value;\n\telse if(value)\n\t\thash['blob-'+name].textContent = value;\n\n\tvar r = {\n\t\texisted:existed,\n\t\telm:em\n\t}\n\treturn r;\n}\n\nfunction blobsUI(blobs,hash)\n{\n\tvar r = {};\n\tvar h = {};\n\tif(hash)\n\t\th = hash;\n\tfor(var k in blobs)\n\t{\n\t\tr[k] = blobUI(k,blobs[k],h);\n\t}\n\n\treturn r;\n}","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\napp.Ext(app,{Popup:function(params){\n\t\tvar Popup ={};\n\t\tvar _this = Popup;\n\t\tvar _content = null;\n\t\tvar _params = params;\n\t\tvar _cParams = null;\n\n\t\t//Private Property\n\t\tvar _isDisableClosing = false;\n\n\t\tvar _CLASS = \"popup\" + (isMobile()?\" mobile\" :\"\");\n\t\tvar _setCLASSNAME = null;\n\n\t\tvar elm = cELM('div','popup');\n\t\t\telm.addEventListener(\"click\", function(e){\n\t\t\t\tif (!e) var e = window.event;\n            \te.cancelBubble = true;\n        \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t\n\t\t\t\tif(!_isDisableClosing)\n\t\t\t\t\tapp.Controller.popPopup();\n\t\t\t});\n\n\t\t\t\n\t\t\telm.addEventListener(\"dragover\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t    elm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '')+\" dragover\";\n\t\t\t});\n\t\t\telm.addEventListener(\"dragleave\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t\telm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '');\n\t\t\t});\n\t\t\telm.addEventListener(\"drop\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t    elm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '')\n\t\t\t    \n\t\t\t    var dt = e.dataTransfer;\n\t\t\t    \n\t\t\t    var types = dt.types;\n\t\t\t    var files = dt.files;\n\t\t\t    var items = dt.items;\n\t\t\t\tvar url = dt.getData('url');\n\t\t\t\t\n\t\t\t\tif (!url) {\n\t\t\t\t    url = dt.getData('text/plain');\n\t\t\t\t    if (!url) {\n\t\t\t\t        url = dt.getData('text/uri-list');\n\t\t\t\t            if (!url) {\n\t\t\t\t                // We have tried all that we can to get this url but we can't. Abort mission\n\t\t\t\t                 //return;\n\t\t\t\t             }\n\t\t\t\t         }\n\t\t\t\t}\n\n\t\t\t    //AR: mock event so it can be used by dropzone\n\t\t\t    var saveEvent = {\n\t\t\t    \tdataTransfer:{\n\t\t\t    \t\tfiles:files,\n\t\t\t    \t\titems:items,\n\t\t\t    \t\turl:url\n\t\t\t    \t}\n\t\t\t    }\n\n\t\t\t   \tif(_content)\n\t\t\t\tif(_content.onDropEvent)\n\t\t\t\t\t_content.onDropEvent(saveEvent)\n\t\t\t    \n\t\t\t});\n\n\n\n\t\tvar btBack = cELM('div','btBack');\n\t\tbtBack.onclick = function(e)\n\t\t{\n\t\t\tif (!e) var e = window.event;\n            e.cancelBubble = true;\n        \tif (e.stopPropagation) e.stopPropagation();\n\n\t\t\tapp.Controller.popPopup();\n\t\t}\n\t\tvar elmHeader = cELM('div','header');\n\t\tvar elmHeaderTitleContainer = cELM('div','title_container');\n\t\tvar elmHeaderTitle = cELM('div','title');\n\t\t//var elmHeaderTitle = cELM('input','title');\n\t\telmHeaderTitle.readOnly = true;\n\n\t\tvar elmNotificationArea = cELM('div','notification');\n\t\tvar _notificationElm = null;\n\n\t\tvar elmControls = cELM('div','header_controls');\n\n\t\tvar elmContent = cELM('div','scroll_content');\n\t\tvar spacer = cELM('div','scroll_spacer');\n\t\telmContent.addELM(spacer);\n\n\t\telmHeader.addELM(btBack);\n\t\telmHeader.addELM(elmHeaderTitleContainer);\n\t\telmHeaderTitleContainer.addELM(elmHeaderTitle);\n\t\t\n\n\n\n\t\tif(!params)\n\t\t{\n\t\t\telm.addELM(elmNotificationArea);\n\t\t}\n\t\t//var content = cELM('div','form');\n\n\t\tPopup.disableClosing = function(bool){\n\t\t\t_isDisableClosing = bool;\n\n\t\t};\n\n\t\tdocument.body.appendChild(elm);\n\t\tPopup.setClass = function(c)\n\t\t{\n\t\t\tif(typeof(c) == \"string\")\n\t\t\t{\n\t\t\t\t_setCLASSNAME = c;\n\n\t\t\t\telm.className = _CLASS+' '+_setCLASSNAME;\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(c.header)\n\t\t\t\t\telmHeader.className = c.header;\n\t\t\t\n\n\t\t\t\tif(c.title)\n\t\t\t\t\telmHeaderTitleContainer.className = c.title;\n\t\t\t\t\t\t\t\n\n\t\t\t\tif(c.content)\n\t\t\t\t\telmContent.className = c.content;\n\t\t\t\t\n\t\t\t\tif(c.controls)\n\t\t\t\t\telmControls.className = c.controls;\n\t\t\t}\n\n\t\t}\n\n\t\tif(_params){\n\t\t\tif(_params.mode)\n\t\t\t{\n\t\t\t\telm.addELM(elmHeader);\n\t\t\t\telm.addELM(elmNotificationArea);\n\t\t\t\tif(_params.controls)\n\t\t\t\t{\n\t\t\t\t\tfor(var i = 0; i < _params.controls.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar ctrl = _params.controls[i];\n\t\t\t\t\t\telmControls.addELM(ctrl);\n\t\t\t\t\t}\n\n\t\t\t\t\telmHeader.addELM(elmControls);\n\t\t\t\t}\n\t\t\t\telse if(_params.control){\n\t\t\t\t\telmHeader.addELM(_params.control);\n\t\t\t\t}\n\n\t\t\t\telm.addELM(elmContent);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.addELM(elmNotificationArea);\n\t\t\t}\n\n\t\t\tif(_params.btBack)\n\t\t\t\tbtBack.addELM(_params.btBack);\n\n\t\t\tif(_params.css)\n\t\t\t\tPopup.setClass(_params.css);\n\t\t}\n\n\n\t\tPopup.clearNotification = function(){\n\t\t\tvar nt = elmNotificationArea;\n\t\t\tif(nt)\n\t\t\t{\n\t\t\t  if(_notificationElm)\n\t\t\t  {\n\t\t\t    nt.removeChild(_notificationElm);\n\t\t\t    _notificationElm = null;\n\t\t\t  }\n\t\t\t  else\n\t\t\t  {\n\t\t\t    nt.innerHTML = \"\";\n\t\t\t  }\n\t\t\t}\n\t\t}\n\t\tPopup.setNotification= function(elm)\n\t\t{\n\t\t\tvar nt = elmNotificationArea;\n\t\t\tif(nt)\n\t\t\t{\n\n\t\t\t  if(_notificationElm)\n\t\t\t  {\n\t\t\t    nt.removeChild(_notificationElm);\n\t\t\t    _notificationElm = null;\n\t\t\t  }\n\t\t\t  else\n\t\t\t  {\n\t\t\t    nt.innerHTML = \"\";\n\t\t\t  }\n\n\t\t\t  if(typeof elm == 'string')\n\t\t\t  {\n\t\t\t     nt.innerHTML = elm;\n\t\t\t  }\n\t\t\t  else if (typeof elm == 'object')\n\t\t\t  {\n\t\t\t    _notificationElm = elm;\n\t\t\t    nt.addELM(elm)\n\t\t\t  }\n\t\t\t}\n\t\t}\n\t\tPopup.getTitle = function(){\n\t\t\treturn elmContent.value;\n\t\t}\n\t\tPopup.init = function(c,cParams)\n\t\t{\n\t\t\tvar additionalCSS = null;\n\n\t\t\t//console.log(c);\n\t\t\t//console.log(_content);\n\n\t\t\tPopup.clearContent();\n\t\t\t_content = c;\n\t\t\t_cParams = cParams;\n\t\t\t\n\t\t\tif(typeof cParams == 'string')\n\t\t\t{\n\n\t\t\t\telm.addELM(_content);\n\n\t\t\t\tadditionalCSS = cParams;\n\t\t\t\tif(additionalCSS)\n\t\t\t\t{\n\t\t\t\t\tPopup.setClass(additionalCSS)\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (typeof cParams == 'object')\n\t\t\t{\n\t\n\t\t\t\tif(cParams.title)\n\t\t\t\t{\n\t\t\t\t\t//elmHeaderTitle.value = cParams.title;\n\t\t\t\t\telmHeaderTitle.innerHTML = cParams.title;\n\t\t\t\t}\n\n\t\t\t\tif(_params)\n\t\t\t\t\telmContent.addELM(_content);\n\t\t\t\telse\n\t\t\t\t\telm.addELM(_content);\n\n\t\t\t\tif(cParams.css)\n\t\t\t\t\tPopup.setClass(cParams.css)\n\n\n\t\t\t\t/*\n\t\t\t\tif(cParams.editable)\n\t\t\t\t\telmHeaderTitle.readOnly = false;\n\t\t\t\t*/\n\n\t\t\t\tif(!_isDisableClosing)\n\t\t\t\t\telm.addEventListener(\"click\", function(e) {\n\t\t\t\t\t\tif (!e) var e = window.event;\n\t\t\t        \te.cancelBubble = true;\n\t\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t\t});\t\t\n\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.addELM(_content);\n\n\t\t\t\tadditionalCSS = cParams;\n\t\t\t\tif(additionalCSS)\n\t\t\t\t{\n\t\t\t\t\tPopup.setClass(additionalCSS)\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\n\n\n\t\t\tif(_content.hasOwnProperty('getELM'))\n\t\t\t{\n\t\t\t\t_content.getELM().addEventListener(\"click\", function(e) {\n\t\t\t\t\tif (!e) var e = window.event;\n\t\t        \te.cancelBubble = true;\n\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_content.addEventListener(\"click\", function(e) {\n\t\t\t\t\tif (!e) var e = window.event;\n\t\t        \te.cancelBubble = true;\n\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t});\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\n\t\t}\n\t\tPopup.isShown = function()\n\t\t{\n\t\t\treturn elm.style.display == \"block\";\n\t\t}\n\t\tPopup.clearContent = function()\n\t\t{\n\t\t\t\n\t\t\tif(_content)\n\t\t\t{\n\t\t\t\tif(_content.getELM)\n\t\t\t\t{\n\t\t\t\t\tif(_content.getELM().parentNode)\n\t\t\t\t\t\t_content.getELM().parentNode.removeChild(_content.getELM());\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(_content.parentNode)\n\t\t\t\t\t\t_content.parentNode.removeChild(_content);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t_content = null;\n\n\t\t\telm.style.display = \"\";\n\n\n\t\t}\n\t\tPopup.hide = function(bool)\n\t\t{\n\n\t\t\tif(_content.hide)\n\t\t\t{\n\t\t\t\t_content.hide(function(){\n\t\t\t\t\telm.style.display = \"none\";\n\t\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.style.display = \"none\";\n\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t}\n\n\t\t\tvar sc = document.getElementById(\"scroll_content\");\n\t\t\tif(sc)\n\t\t\t{\n\t\t\t\tvar cnorg = sc.className.replace(\"show-content\",\"\");\n\t\t\t\tsc.className = cnorg;\n\t\t\t}\n\n\t\t}\n\t\tPopup.show = function(bool,hasState,isFullScreen)\n\t\t{\n\n\n\t\t\tif(isFullScreen)\n\t\t\t{\n\t\t\t\tvar sc = document.getElementById(\"scroll_content\");\n\t\t\t\tif(sc)\n\t\t\t\t{\n\t\t\t\t\tvar cnorg = sc.className.replace(\"show-content\",\"\");\n\t\t\t\t\tsc.className = cnorg + (bool ? \"show-content\" : \"\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(bool && elm.style.display == 'block')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbool = typeof bool === \"undefined\" ? true : bool;\n\t\t\telm.style.display = bool ? \"block\" : \"none\";\n\n\t\t\tif(_content)\n\t\t\t\tif(_content.show)\n\t\t\t\t\t_content.show(bool);\n\t\n\t\t\tvar state = null;\n\n\t\t\tif(bool)\n\t\t\t{\n\t\t\t\tif(typeof _cParams == 'object' && _cParams)\n\t\t\t\t{\n\t\t\t\t\tif(_cParams.history)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate = app.Controller.pushPopup(_this,_cParams.history,hasState);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate = app.Controller.pushPopup(_this,null,hasState);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate = app.Controller.pushPopup(_this,null,hasState);\n\t\t\t\t}\n\t\n\n\t\t\t\tapp.Controller.lockWindow();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.style.display = \"none\";\n\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t}\n\n\n\t\t\treturn state;\n\t\t}\n\n\t\tPopup.getHTML = function()\n\t\t{\n\n\t\t\t\n\n\t\t\treturn elm;\n\t\t}\n\n\n\treturn Popup;\n}});\n","app.Ext(app,{DAL:{\n//--DAL UTIL\n    getObjectFromParse:function(parseObj)\n    {\n        var obj = parseObj.attributes;\n        obj.objectId = parseObj.id;\n        return(obj);\n    },   \n    setParseObject:function(parseObj,obj)\n    {\n        for(var k in obj)\n        {\n            parseObj.set(k,obj[k]);\n        }\n    },\n    loginSocial:function(type)\n    {\n\n    },\n    login:function(email,password,success,error)\n    {\n      if(email)\n        email = email.toLowerCase();\n\n      Parse.User.logIn(email, password, {\n        success: function(user) {\n          // Do stuff after successful login.\n\n\n          Parse.Cloud.run('checkRole', {}, {\n          success: function(result) {\n            success(user);\n          },\n          error: function(er) {\n            error(er);\n          }\n          });\n\n\n        },\n        error: function(user, er) {\n          // The login failed. Check error to see why.\n          error(er);\n        }\n      });\n    },\n    logout:function()\n    {\n      removeStoredKVP('AUTH_CALLBACK');\n\n      setCookie('username', \"\", 325);\n      setCookie('userId', \"\", 325);\n      setCookie('session_token', \"\", 325);\n      setCookie('lastLoginPath',null,325);\n\n      Parse.User.logOut();\n    },\n    signUp:function(email,password,success,error)\n    {\n        var pw = password;\n        var em = email;\n        if(em)\n          em = em.toLowerCase();\n\n\n        var user = new Parse.User();\n        user.set(\"username\", em);\n        user.set(\"password\", pw);\n        user.set(\"email\", em);\n\n        var ep = em.split('@');\n        user.set(\"fullname\",ep[0]);\n\n        console.log(ep[0]);\n         \n        user.signUp(null, {\n          success: function(user) {\n            // Hooray! Let them use the app now.\n\n            Parse.Cloud.run('checkRole', {}, {\n            success: function(result) {\n              success(user);\n            },\n            error: function(er) {\n              error(er);\n            }\n            });\n\n            \n\n          },\n          error: function(user, er) {\n           \n            error(er);\n          }\n        });\n    }    \n\n}});\n","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n(function () {\n  \"use strict\";\n\n  var _doc = document;\n  var _getElmById = function(id){\n    return _doc.getElementById(id);\n  }\n  var _getElmByClass = function(className){\n    return _doc.getElementsByClassName(className)\n  };\n\n  var PATHS = {},\n      HOST = \"\",\n      AUTH_PATH = \"/auth/\",\n      SECTION_PATH = \"/scripts/sections/\",\n      MODULE_PATH = \"/scripts/modules/\",\n      LIB_PATH = \"/scripts/libs/\",\n      CSS_PATH = \"/css/\"\n\n  //private variables\n  var _windowPosition = [],\n      _popupStacks = [],\n      _popupListener = null,\n      _sectionParams = {},\n      _currentSection = null,\n      _sections = {},\n      _modules ={};\n\n  var _stateCursor = -1, // state management to wrap window.history\n      _states = [],\n      _stateListeners = [],\n      _onWindowStateChange = null,\n      _onStateChange = function(){\n\n          for(var i = 0; i < _stateListeners.length; i++)\n          {\n            _stateListeners[i](_getCurrentState());\n          }\n      },\n      _getCurrentState = function(){\n\n        if(_states.length > _stateCursor && _stateCursor >= 0)\n        {\n          return _states[_stateCursor];\n        }\n        else\n        {\n          return null;\n        }\n      },\n      _moveStateCursor = function(cnt){\n\n        _stateCursor += cnt;\n\n        //set bounds\n        if(_stateCursor > _states.length)\n        {\n          _stateCursor = _states.length;  \n        }\n        else if(_stateCursor < -1)\n        {\n          _stateCursor = -1;\n        }\n        \n      },\n      isHttpProtocol = function(){\n        \n        if(document.location.protocol == 'http:' || document.location.protocol == 'https:')\n          return true;\n        else\n          return false;\n      };\n\n  var _SectionNavButtons = {};\n  var _SectionNavBadges = {};\n  var _notificationElm = null;\n  var _popover = null,\n      _isInitPopovers = false;\n  var _featureFlags = {};\n\n  //private function\n  var _loadSection = function(sName){\n\n\n      if(IsEmpty(sName))\n        return\n\n      var container = _getElmById('scroll_content');\n\n      var defaultPath = SECTION_PATH+sName+\".js\";\n\n      if(_sectionParams[sName])\n      if(_sectionParams[sName].host)\n        defaultPath = _sectionParams[sName].host + SECTION_PATH+sName+\".js\";\n\n\n      var titleArea = null;\n      var hs = _getElmByClass('controls_header');\n      if(hs)\n      {\n        if(hs.length > 0)\n        {\n          hs[0].className = 'controls_header '+ sName+'_header'\n          var ht = hs[0].querySelector('#header_title');\n          if(ht)\n          {\n            ht.innerHTML = '';\n            var param = _sectionParams[sName];\n            if(param)\n              if(param.title)\n              {\n                ht.innerHTML = param.title;\n                titleArea = ht;\n              }\n          }\n\n        }\n      }\n      \n      var buttonId = 'bt' + sName.toTitleCase();\n      var badge = _SectionNavBadges[buttonId];\n\n\n      var _renderSection = function(sName){\n\n        require([SECTION_PATH+sName+\".js\"], function(section) {\n\n            \n            _sections[sName] = section;\n            section.init(app.User.isLogin(),container,titleArea,badge);          \n            section.render();\n\n            _currentSection = _sections[sName];\n        },function(err){\n          //console.log(sName);\n          console.log(err);\n          _currentSection = null;\n        }); \n        \n      }\n\n\n\n      if(!app.Mod(sName))\n      {\n        console.log('no modules found');\n        LoadCSS(CSS_PATH+sName+'.css');\n        app.RegMods([sName],function(){\n            _renderSection(sName);\n        })\n      }\n      else\n      {\n        _renderSection(sName);\n      }\n\n\n\n           \n  }\n\n\n\n  app.Ext(app, {\n    //module registration\n    Paths:function(paths){\n\n      if(paths)\n      {\n        PATHS = paths;\n\n        if(paths.section)\n          SECTION_PATH = paths.section;\n        \n        if(paths.module)\n          MODULE_PATH = paths.module;\n        \n        if(paths.css)\n          CSS_PATH = paths.css;\n\n        if(paths.lib)\n          LIB_PATH = paths.lib;\n\n        if(paths.auth)\n          AUTH_PATH = paths.auth;\n\n        if(paths.host)\n        {\n          HOST = paths.host;\n          LIB_PATH = HOST+LIB_PATH;\n          CSS_PATH = HOST+CSS_PATH;\n          MODULE_PATH = HOST+MODULE_PATH;\n          SECTION_PATH = HOST+SECTION_PATH;\n        }        \n      }\n      \n      var r = {\n        auth:PATHS.auth ? PATHS.auth : AUTH_PATH,\n        module:PATHS.module ? PATHS.module : MODULE_PATH,\n        css:PATHS.css ? PATHS.css : CSS_PATH,\n        lib:PATHS.lib ? PATHS.lib : LIB_PATH,\n        section:PATHS.section ? PATHS.section : SECTION_PATH,\n        host:PATHS.host ? PATHS.host : HOST\n      }\n\n      for(var p in PATHS)\n      {\n        if(!r[p])\n          r[p] = PATHS[p];\n      }\n\n      return r;\n    },\n    Mod:function(sName)\n    {\n      return _modules[sName];\n    },\n    RegMod:function(name,mod)\n    {\n      if(_modules[name])\n        return mod\n\n      _modules[name] = mod;\n    },\n    RegMods:function(names,callback)\n    {\n\n      var paths = [];\n      var moduleNames = names;\n      for(var i = 0; i < moduleNames.length; i++)\n      {\n        var mName = moduleNames[i];\n        if(!app.Mod(mName))\n        {\n          var defaultPath = MODULE_PATH+mName+\".js\";\n          if(_sectionParams[mName])\n          if(_sectionParams[mName].host)\n            defaultPath = _sectionParams[mName].host + MODULE_PATH+mName+\".js\";\n\n          paths.push(defaultPath);\n        }          \n      }\n\n      if(paths.length > 0)\n      {\n        require(paths, function() {\n         \n          for(var i = 0; i < arguments.length; i++)\n          {\n            app.RegMod(moduleNames[i],arguments[i])\n          }\n          \n          callback(paths);\n        \n        },function(err){\n          console.log(err);\n          callback(null);\n\n        });\n      }\n\n    },\n    Bind:function(module,componentsNames,objects)\n    {\n      /*\n      @aaronrau: different name spaces and 2 deep name space are not supported right now such as \n        [\"namespace_a.component\",\"namespace_b.component\",\"namespace_a.sub_namespace_a.component\"]\n      \n      */\n\n        for(var n in objects)\n        {\n          var i = parseInt(n);\n          if(isNaN(i))\n            continue;\n          \n          var uicomponent = objects[n];\n          var paths = componentsNames[n].split('/');\n          var names = paths[paths.length-1].split('.');\n          var name = names[1].toTitleCase();\n          var moduleName = names[0].toLowerCase();\n          \n          if(names[1] == 'DAL')\n            name = 'DAL';\n\n          //console.log(name);\n          if(!app.Mod(moduleName) && names.length == 2)\n            app.RegMod(moduleName,uicomponent);\n          \n          var ext = {}; ext[name] = uicomponent;\n          app.Ext(module,ext);\n        }\n\n      \n\n\n    },\n    State:{ // manually handle state to allow for local access\n      //https://developer.mozilla.org/en-US/docs/Web/Events/popstate\n      init:function(value,opath){\n        if(!_onWindowStateChange)\n        {\n          _onWindowStateChange = function(e){\n            var state = e.state,\n                type = e.type,\n                target = e.target;\n\n            if(_states.length > 0) //this should never have happened use app.State.push(); or call app.State.init()\n            {\n               //not sure where the cusor should be so check the state first;\n               if(state)\n               {\n                  var isFound = false;\n                  for(var i = 0; i < _states.length; i++)\n                  {\n                    var s = _states[i];\n                    if(s.uid == state.uid)\n                    {\n                      _stateCursor = i;\n                      isFound = true;\n                      break;\n                    }\n                  }\n\n                  if(!isFound)\n                  {\n                    console.warn(\"Invalid State. app.State.init() or app.State.push() may not have been called\");\n                  }\n                  \n               }\n               else\n               {\n                  _stateCursor = 0;\n               }\n               _onStateChange();   \n               \n            }\n            \n          };\n          window.addEventListener(\"popstate\",_onWindowStateChange);\n        }\n\n        var v = null,\n            p = null,\n            urlParts = getURLParts(document.location),\n            partsIdx = -1;\n\n        var defaultSection = null;\n        for(var s in _sectionParams)\n        {\n          defaultSection = s;\n          break;\n        }\n\n        if(value){\n          v = value;\n        }\n        else\n        {\n          var n1 = urlParts[0],\n              n2 = \"\",\n              nm = \"\";\n          \n          if(urlParts.length > 1)\n          {\n            n2 = urlParts[urlParts.length-1];\n          }\n\n          if(n2.indexOf('.') > -1) //most likely a local file reference;\n          {\n            \n            nm = n2.split('.')[0].toLowerCase();\n            if(nm.indexOf('index') > -1)\n            {\n                nm = defaultSection;\n            }\n          }\n          else{\n\n            //find first matching section with url name\n            for(var i = 0; i < urlParts.length; i++)\n            {\n              var pt = urlParts[i].toLowerCase();\n              if(_sectionParams[pt])\n              {\n                nm = pt;\n                partsIdx = i;\n                break;\n              }    \n            }\n\n            if(IsEmpty(nm))\n              nm = n1; \n\n            if(IsEmpty(nm))\n              nm = defaultSection;\n          }\n\n          v = {\n            section:nm\n          }\n\n          //opath = v.section + window.location.search + window.location.hash;\n        }\n\n        if(!IsEmpty(opath)){\n          p = opath;\n        }\n        else\n        {\n          var splitparts = \"\";\n          if(partsIdx > -1)\n          {\n            splitparts = ''\n            for(var i = partsIdx+1; i < urlParts.length; i++)\n            {\n              var p = urlParts[i];\n              splitparts += ('/'+p);\n            }\n          }\n          p = '/'+v.section+splitparts+ window.location.search + window.location.hash;\n        }\n\n        _stateCursor = -1;\n        app.State.push(v,p);\n      },\n      back:function(){\n        \n        if(isHttpProtocol()){\n          window.history.back();\n        }\n        else\n        {\n          _moveStateCursor(-1);\n          _onStateChange();\n        }\n      },\n      forward:function(){\n        \n      \n        if(isHttpProtocol()){\n          window.history.forward();\n        }\n        else\n        {\n          _moveStateCursor(1);\n          _onStateChange();\n        }\n      },\n      go:function(cnt){\n       \n        if(isHttpProtocol()){\n          window.history.go(cnt);\n        }\n        else\n        {\n          _moveStateCursor(cnt);\n          _onStateChange();\n        }\n      },\n      push:function(value,path){\n        \n        var s = {\n          value:value,\n          path:path,\n          uid:guidGenerator()\n        }\n\n        _moveStateCursor(1);\n        _states[_stateCursor] = s;\n\n        if(isHttpProtocol()){\n          window.history.pushState(_states[_stateCursor], \"\", path);\n        }\n\n      },\n      replace:function(value,path){\n        if(_stateCursor < 0)\n          _stateCursor = 0;\n\n        var s = {\n          value:value,\n          path:path,\n          uid:guidGenerator()\n        }\n\n        _states[_stateCursor] = s;\n\n        if(isHttpProtocol()){\n          window.history.replaceState( _states[_stateCursor], \"\", path);\n        }\n\n      },\n      get:function(){\n        return _states;\n      },\n      value:function(){\n        return _getCurrentState().value;\n      },\n      current:function(){\n        return _getCurrentState();\n      },\n      addEventListener:function(func){\n       \n        if(!_stateListeners)\n        {\n          _stateListeners = [];\n        }\n\n        _stateListeners.push(func); //type & value & current state are passed;\n      }\n    },\n    User:{\n      get:function()\n      {\n        return Parse.User.current();\n      },\n      become:function(token,error){\n\n        if(IsEmpty(error))\n        {\n\n          Parse.User.become(token).then(function(result){\n            \n            var currentUser = Parse.User.current();\n            onLoginSuccess(currentUser);\n            \n          });\n\n        }\n        else\n        {\n          alert(error);\n          //document.getElementsByClassName('')\n        }\n\n      },\n      isLogin:function()\n      {\n        var currentUser = null;\n        if(window.hasOwnProperty('Parse'))\n          currentUser = Parse.User.current(); \n         \n        return currentUser ? currentUser : false;\n      },\n      login:function(callback){\n        //todo\n      },\n      logout:function(callback){\n\n\n        app.DAL.logout();\n\n        setTimeout(function() {\n          if(callback)\n            callback();\n          else\n            location.reload();\n        }, 800);\n\n      }\n    },\n    Controller: {\n      sectionBadges:null,\n      checkFeature:function(feature_flag)\n      {\n        return _featureFlags[feature_flag];\n      },\n      setFeatureFlags:function(flags)\n      {\n        _featureFlags = flags;\n      },\n      lockWindow: function() {\n        _windowPosition = [\n          self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,\n          self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n        ];\n        var html = document.getElementsByTagName('html')[0]; // it would make more sense to apply this to body, but IE7 won't have that\n        html.data = {};\n        html.data['scroll-position'] = _windowPosition;\n        html.data['previous-overflow'] =  html.style.overflow;\n        html.style.overflow = 'hidden';\n        window.scrollTo(_windowPosition[0], _windowPosition[1]);\n      },\n      unlockWindow: function() {\n        // un-lock scroll position\n        var html = document.getElementsByTagName('html')[0];\n\n        if(html.data)\n        {\n          var scrollPosition = html.data['scroll-position'];\n          html.style.overflow = html.data['previous-overflow'];\n          window.scrollTo(scrollPosition[0], scrollPosition[1]);\n   \n        }\n      },\n      clearNotification:function(){\n        var nt = document.getElementById('notification');\n        if(nt)\n        {\n          if(_notificationElm)\n          {\n            nt.removeChild(_notificationElm);\n            _notificationElm = null;\n          }\n          else\n          {\n            nt.innerHTML = \"\";\n          }\n        }\n      },\n      setNotification:function(elm)\n      {\n        var nt = document.getElementById('notification');\n        if(nt)\n        {\n\n          if(_notificationElm)\n          {\n            nt.removeChild(_notificationElm);\n            _notificationElm = null;\n          }\n          else\n          {\n            nt.innerHTML = \"\";\n          }\n\n          if(typeof elm == 'string')\n          {\n             nt.innerHTML = elm;\n          }\n          else if (typeof elm == 'object')\n          {\n            _notificationElm = elm;\n            nt.addELM(elm)\n          }\n        }\n      },\n      showPopover:function(obj,type){\n\n        var pc = null;\n        if(type == 'scroll')\n        {\n          if(!_popover)\n            _popover = obj;\n\n          pc = _popover.getControls();\n\n          //if(pc.style.display == 'block')\n          //  pc.style.display = 'none'\n          //return;\n        }\n        else if(type == 'resize') //window is resizing\n        {\n          if(!_popover)\n            _popover = obj;\n\n          pc = _popover.getControls();\n\n        }\n        else\n        {\n          if(!_popover)\n          {\n            _popover = obj;\n          }\n\n          var opc =  _popover.getControls();\n          var p = opc.parentNode;\n          if(p)\n            p.removeChild(opc);\n          \n           _popover = obj;\n          \n          pc = _popover.getControls();\n          document.body.appendChild(pc);          \n        }\n\n\n        var rec = _popover.getELM().getBoundingClientRect(),\n            prec = pc.getBoundingClientRect(),\n            offset = 0;\n\n        var prm = _popover.getParams();\n        if(prm.mode)\n          if(prm.mode == \"global\")\n          {\n            var height = window.innerHeight\n                      || document.documentElement.clientHeight\n                      || document.body.clientHeight;\n            \n            if(!prm.disableAutoPlacement){\n              if((rec.top + prec.height + 50) > height)\n              {\n                pc.style.top = (pc.style.top - rec.height);\n                offset = -1*(prec.height+40);\n                if(pc.className.indexOf(' loc-above') == -1)\n                    pc.className = pc.className + ' loc-above';\n              }\n              else\n              {\n                pc.className = pc.className.replace(' loc-above',''); \n              }              \n            }\n          }\n\n        pc.style.top = (rec.top+offset+window.scrollY)+\"px\";\n        pc.style.left = (rec.left+window.scrollX)+\"px\";\n\n        pc.style.display = 'block';\n\n      },\n      handleExpandEvent:function(type,event)\n      {\n        for(var i = 0; i < app.controls.expandButtons.length; i++)\n        {\n          if(app.controls.expandButtons[i].handle)\n            app.controls.expandButtons[i].handle(type,event);\n        }\n      },\n      registerExpand:function(obj){\n\n          if(!app.controls.expandButtons)\n          {\n             app.controls.expandButtons = [] \n          }\n\n          if(!_isInitPopovers)\n          {\n            _isInitPopovers = true;\n\n            document.body.addEventListener(\"mousedown\", function(e) {\n              app.Controller.handleExpandEvent('document-mousedown',e);\n            });\n            //is shown with app.Controller.showPopover\n            window.addEventListener(\"resize\", function(event) {\n              app.Controller.handleExpandEvent('window-resize',event);\n            });\n            \n            //is shown with app.Controller.showPopover\n            window.addEventListener(\"scroll\", function(event) {\n              app.Controller.handleExpandEvent('window-scroll',event);\n            },true); \n\n          }\n\n          app.controls.expandButtons.push(obj.getControls());\n\n      },\n      getVisiblePopover:function(){\n\n        if(app.controls.expandButtons)\n          for(var i = 0; i < app.controls.expandButtons.length; i++)\n          {\n            var item = app.controls.expandButtons[i];\n   \n              if(item.style.display == 'block')\n              {\n                return item;        \n              }\n          }\n\n        return null;        \n      },\n      closePopovers:function(e)\n      {\n        if(app.controls.expandButtons)\n        for(var i = 0; i < app.controls.expandButtons.length; i++)\n        {\n          var item = app.controls.expandButtons[i];\n          if(item.handle)\n          {\n            item.handle('close-popover',e);\n          }\n          else\n          {\n            if(item.style.display != 'none')\n              item.style.display = 'none';            \n          }\n\n        }\n      },\n      pushPopup:function(popup,path,hasState)\n      {\n        var p = path;\n        app.Controller.closePopovers();\n\n       \n        if(hasState)\n        {\n          return hasState;\n        }\n\n        _popupStacks.push(popup);\n\n        if(IsEmpty(p))\n        {\n          p = app.State.current().path;\n        }\n    \n        app.State.push({\"objectHash\":guidGenerator(),isPopup:true},p);\n       \n        if(!_popupListener)\n        {\n          _popupListener = function(currentState){ // AR: This state is the state before the pushed popup\n\n              var p = _popupStacks.pop();\n              if(p)\n              {\n                p.hide();\n              }   \n\n          };\n          app.State.addEventListener(_popupListener);\n        }\n        \n        return app.State.value();\n\n        \n      },\n      popPopup:function()\n      {\n        app.State.back();\n      },\n      //TODO: http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page/\n      initSectionSelections: function(sectionNames) {\n\n        window.onscroll = function(e)\n        { \n          app.Controller.closePopovers(e);\n        }\n\n        _sectionParams = sectionNames;\n        _sections = {};\n\n        var fs = _getElmByClass('controls_footer');\n        var footer = null;\n        if(fs)\n          footer = fs[0];\n        \n        if(footer)\n        {\n          footer.innerHTML = '';\n          var ul = cELM('ul');\n          footer.addELM(ul);\n\n          //console.log(sectionNames);\n          //build footer controls\n          for (var section in _sectionParams) {\n          \n            _sections[section] = null;\n\n            var buttonId = 'bt' + section.toTitleCase();\n\n            var w = cELM('li');\n            var anc = cELM('a');\n            var bt = cELM('div','button '+buttonId);\n            anc.addELM(bt);\n            anc.value = buttonId;\n            anc.section = section;\n            anc.onclick = function(e) {\n                \n\n              \n                app.Controller.showSection(this.section);\n              }\n\n            w.addELM(anc);\n            \n            if(_sectionParams[section].hasBadge)\n            {\n              var badge = cELM('div','badge badge'+section.toTitleCase());\n              anc.addELM(badge);\n              _SectionNavBadges[buttonId] = badge;\n\n              if(_CTRL().sectionBadges)\n              {\n                  if(_CTRL().sectionBadges[section])\n                    badge.innerHTML = _CTRL().sectionBadges[section];\n              }\n            }\n\n            ul.addELM(w);\n\n            _SectionNavButtons[buttonId] = bt;\n\n\n          }\n        }\n       \n      },\n      showSection: function(initSectionName) {\n        \n        var loc = document.location.toString();\n        if(loc.indexOf('/auth/') >-1 ||\n          loc.indexOf('/login') >-1 ||\n          loc.indexOf('/logout') >-1 ||\n          loc.toString().indexOf('/signup') >-1)\n          return;\n\n        var sName = \"\";\n\n        if(initSectionName)\n        {\n          sName = initSectionName;\n          app.State.push({section:sName},sName);\n        }\n        else\n        {\n          app.State.init();\n          var st = app.State.value();\n          sName = st.section;\n        }\n\n        var csec = _currentSection;\n        if(csec)\n          if(csec.clear)\n            csec.clear();\n\n        //select current button\n        for(var bId in _SectionNavButtons)\n        {\n          var bt = _SectionNavButtons[bId];\n          bt.className = 'button ' + bId;\n        }\n\n\n        var bId = 'bt' + sName.toTitleCase();\n        if (_SectionNavButtons[bId]) {\n          var bt = _SectionNavButtons[bId];\n          if (bt) {\n            bt.className = 'button ' + bId + \"_selected\";\n          }\n        }\n\n        var hs = _getElmByClass('controls_header');\n        if(hs)\n        {\n          if(hs.length > 0)\n          {\n            hs[0].className = 'controls_header '+ sName+'_header'\n            var ht = hs[0].querySelector('#header_title');\n            if(ht)\n            {\n              ht.innerHTML = '';\n              var param = _sectionParams[sName];\n              if(param)\n                if(param.title)\n                {\n                  ht.innerHTML = param.title;\n                }\n            }\n\n          }\n        }\n\n        var sec = _sections[sName];\n        if (sec) {\n          sec.render();\n          _currentSection = _sections[sName];\n\n        }\n        else\n        {\n          var param = _sectionParams[sName];\n\n          if(param)\n          if(param.mods)\n          if(param.mods.length > 0)\n            return app.RegMods(param.mods,function(){\n              if(param.css)\n                LoadCSS(param.css);\n              //load section from JS TODO: might have to add a loading sign if this is too slow;\n              _loadSection(sName);\n            })\n          \n\n          return _loadSection(sName);\n          \n        }\n\n\n\n\n      }\n    }\n\n  });\n\n}());\n","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\napp.Ext(app,{Login:function(params,callback){\n\t\tvar Login ={}\n\n\t\tvar completeLogin = callback,\n\t\t\tauthPath = app.Paths().auth;\n\n\t\t//Private Property\n\t\tvar _data = {},\n\t\t\t_params = null,\n\t\t\t_mode = 'login', // login\n\t\t\t_isOAuthOnly = false,\n\t\t\t_OAuthState = \"\";\n\n\t\tvar elm = cELM('div','login');\n\n\n\t\tif(typeof params === 'object')\n\t\t{\n\t\t\tif(params.mode)\n\t\t\t\t_mode = params.mode;\n\n\t\t\tif(params.isOAuthOnly)\n\t\t\t\t_isOAuthOnly = params.isOAuthOnly;\n\n\t\t\tif(params.OAuthState)\n\t\t\t\t_OAuthState = params.OAuthState;\n\n\t\t\t_params = params;\n\n\t\t}\n\t\telse if(typeof params === 'string')\n\t\t{\n\t\t\t_mode = params; // type\n\t\t}\n\n\t\tvar onLoginSignUp = function(e)\n\t\t{\n\t\t\tmsgArea.innerHTML = \"\";\n\t\t\t\n\t\t\tvar p = window.location.href;\n\t\t\tif(p.indexOf(authPath) == -1 \n\t\t\t\t&& p.indexOf('/login') == -1 \n\t\t\t\t&& p.indexOf('/signup') == -1)\n\t\t\t\tsetCookie('lastLoginPath',p,325);\n\t\t\telse\n\t\t\t\tsetCookie('lastLoginPath',null,325);\n\t\t}\n\n\n\t\tvar txtUsername = cELM('INPUT');\n\t\ttxtUsername.id = \"txtUsername\";\n\t\ttxtUsername.setAttribute(\"type\", \"text\");\n\t\ttxtUsername.setAttribute(\"placeholder\", \"Email\");\n\n\t\tvar txtPassword = cELM('INPUT');\n\t\ttxtPassword.id = \"txtPassword\";\n\t\ttxtPassword.setAttribute(\"type\", \"password\");\n\t\ttxtPassword.setAttribute(\"placeholder\", \"Password\");\n\n\t\tvar txtFullname = cELM('INPUT');\n\t\ttxtFullname.setAttribute(\"type\", \"text\");\n\t\ttxtFullname.setAttribute(\"placeholder\", \"Name\");\n\t\ttxtFullname.style.display = 'none';\n\n\n\t\tvar txtTitle = cELM('DIV','txtTitle');\n\t\tvar txtNote = cELM('DIV','txtNote');\n\n\t\tvar msgArea = cELM('DIV','error_message');\n\t\n\t\tvar btForgot = cELM('DIV','textButton');\n\t\tbtForgot.id = \"btForgot\";\n\t\tbtForgot.innerHTML = \"Forgot your password?\"\n\n\t\tvar btSwitch = cELM('DIV','textButton');\n\t\tbtSwitch.id = \"btSwitch\";\n\n\t\tvar btAction = cELM('DIV','button');\n\t\tbtAction.id = \"btAction\";\n\n\t\tvar aSocialLogin = cELM('DIV','social');\n\n\n\t\tvar btGmail = cELM('a','button');\n\t\tbtGmail.id = \"btGmailLogin\";\n\t\tbtGmail.onclick = function(e)\n\t\t{\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = authPath+'google'+(!IsEmpty(_OAuthState) ? (\"?state=\"+_OAuthState):\"\");\n\t\t\t},200)\n\t\t}\n\n\t\tvar btFacebook = cELM('a','button');\n\t\tbtFacebook.id = \"btFacebookLogin\";\n\t\t//btFacebook.href = '/auth/facebook';\n\t\tbtFacebook.onclick = function(e)\n\t\t{\n\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = authPath+'facebook'+(!IsEmpty(_OAuthState) ? (\"?state=\"+_OAuthState):\"\");\n\t\t\t},200)\n\t\t}\n\t\tvar btTwitter = cELM('a','button');\n\t\tbtTwitter.id = \"btTwitterLogin\";\n\t\t//btTwitter.href = '/auth/twitter';\n\t\tbtTwitter.onclick = function(e)\n\t\t{\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = authPath+'twitter'+(!IsEmpty(_OAuthState) ? (\"?state=\"+_OAuthState):\"\");\n\t\t\t},200)\n\t\t}\n\n\t\t//btFacebook.innerHTML = \"with Facebook\";\n\t\t//btTwitter.innerHTML = \"with Twitter\";\n\t\t//btGmail.innerHTML = \"with Google\"\n\n\t\tvar swithMode = function(m)\n\t\t{\n\t\t\t_mode = m;\n\t\t\ttxtNote.innerHTML = \"\";\n\t\t\tmsgArea.innerHTML = \"\";\n\t\t\ttxtUsername.style.visibility = 'visible';\n\n \t\t\tif(_mode == \"forgot\")\n\t\t\t{\n\t\t\t\taSocialLogin.style.display ='none';\n\n\t\t\t\telm.className = \"login forgot\";\n\n\t\t\t\ttxtTitle.innerHTML = \"Reset Password\";\n\t\t\t\tmode = \"forgot\";\n\t\t\t\tbtAction.innerHTML = 'Reset Password';\n\t\t\t\tbtSwitch.innerHTML = 'or login';\n\t\t\t\tbtForgot.style.visibility = 'hidden';\n\t\t\t\tbtForgot.style.display = 'none';\n\t\t\t\ttxtPassword.style.visibility = 'hidden';\n\t\t\t}\n\t\t\telse if(_mode == \"login\")\n\t\t\t{\n\t\t\t\t\n\t\t\t\taSocialLogin.style.display ='block';\n\n\t\t\t\telm.className = \"login\";\n\n\t\t\t\tvar tt = \"Please Login\"\n\t\t\t\tif(_params.title)\n\t\t\t\t\tif(_params.title.login)\n\t\t\t\t\t{\n\t\t\t\t\t\ttt = _params.title.login.start\n\t\t\t\t\t}\n\n\t\t\t\ttxtTitle.innerHTML = tt;\n\t\t\t\t_mode = \"login\";\n\t\t\t\tbtAction.innerHTML = 'Login';\n\t\t\t\tbtSwitch.innerHTML = 'or signup now';\n\t\t\t\tbtForgot.style.visibility = 'visible';\n\n\t\t\t\tbtForgot.style.display = 'block';\n\t\t\t\ttxtPassword.style.visibility = 'visible';\n\t\t\t\tLogin.showControls(true);\n\n\n\t\t\t}\n\t\t\telse if(_mode == \"signup\")\n\t\t\t{\n\t\t\t\taSocialLogin.style.display ='block';\n\n\t\t\t\telm.className = \"login signup\";\n\n\t\t\t\tvar tt = \"Please Signup\"\n\t\t\t\tif(_params.title)\n\t\t\t\t\tif(_params.title.signup)\n\t\t\t\t\t{\n\t\t\t\t\t\ttt = _params.title.signup.start\n\t\t\t\t\t}\n\n\t\t\t\ttxtTitle.innerHTML = tt;\n\t\t\t\t_mode = \"signup\";\n\t\t\t\tbtAction.innerHTML = 'Signup';\n\t\t\t\tbtSwitch.innerHTML = 'or login';\n\t\t\t\tbtForgot.style.display = 'none';\n\t\t\t\ttxtPassword.style.visibility = 'visible';\n\t\t\t\tLogin.showControls(true);\n\t\t\t\n\t\t\t\ttxtFullname.style.display = 'block';\n\n\t\t\t}\n\t\t\telse if(_mode == \"change\")\n\t\t\t{\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\t\t}\n\n\t\tbtForgot.onclick = function(e)\n\t\t{\n\t\t\tswithMode(\"forgot\");\n\t\t}\n\n\t\tbtAction.onclick = function(e)\n\t\t{\n\t\t\tLogin.loginOrSignup();\n\t\t}\n\t\tbtSwitch.onclick = function(e)\n\t\t{\n\t\t\tif(_mode == \"signup\")\n\t\t\t{\n\t\t\t\tswithMode(\"login\");\n\t\t\t}\n\t\t\telse if(_mode ==\"login\")\n\t\t\t{\n\t\t\t\tswithMode(\"signup\");\n\t\t\t}\n\t\t\telse if(_mode ==\"forgot\")\n\t\t\t{\n\t\t\t\tswithMode(\"login\");\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t    window.addEventListener(\"keypress\", function(e) {\n\t    \n\t      if(e.keyCode == 13) \n\t      {\n\t        Login.loginOrSignup();\n\t      }\n\t    }, false);\n\n\t\tLogin.showControls = function(isShow)\n\t\t{\n\t\t\tif(isShow)\n\t\t\t{\n\t\t\t\tbtAction.style.visibility = 'visible';\n\t\t\t\tbtSwitch.style.visibility = 'visible';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbtAction.style.visibility = 'hidden';\n\t\t\t\tbtSwitch.style.visibility = 'hidden';\n\t\t\t}\n\t\t}\n\t\tLogin.show = function(isShow)\n\t\t{\n\t\t\telm.style.display = isShow ? 'block' : 'none';\n\t\t}\n\t\tLogin.loginOrSignup = function()\n\t\t{\n\t\t\tLogin.showControls(false);\n\t\t\t\n\n\t\t\tvar hideControls = function(){\n\t\t\t\ttxtUsername.style.display = 'none';\n\t\t\t\ttxtPassword.style.display = 'none';\n\t\t\t\tbtForgot.style.visibility = 'hidden';\n\t\t\t\taSocialLogin.style.display ='none';\n\t\t\t}\n\n\n\t\t\tvar showControls = function(){\n\t\t\t\ttxtUsername.style.display = 'block';\n\t\t\t\ttxtPassword.style.display = 'block';\n\t\t\t\tif(_mode != 'forgot')\n\t\t\t\t\tbtForgot.style.visibility = 'block';\n\n\t\t\t\taSocialLogin.style.display ='block';\n\t\t\t}\n\n\t\t\thideControls();\n\t\t\tif(_mode == \"signup\")\n\t\t\t{\n\t\t\t\tonLoginSignUp();\n\n\t\t\t\tvar tt = \"Signing up </br> </br> Please wait...\"\n\t\t\t\tif(_params.title)\n\t\t\t\t\tif(_params.title.signup)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(_params.title.signup.complete)\n\t\t\t\t\t\t\ttt = _params.title.signup.complete\n\t\t\t\t\t}\n\n\t\t\t\ttxtTitle.innerHTML = tt ;\n\n\t\t\t\tapp.DAL.signUp(txtUsername.value,txtPassword.value,\n\t\t\t\tfunction(user){\n\t\t\t\t\tcompleteLogin(user);\n\t\t\t\t},\n\t\t\t\tfunction(error){\n\t\t\t\t\tshowControls();\n\t\t\t\t\tLogin.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_mode == \"login\")\n\t\t\t{\n\t\t\t\tonLoginSignUp();\n\n\t\t\t\tvar tt = \"Logging in </br></br> Please wait...\";\n\t\t\t\tif(_params.title)\n\t\t\t\t\tif(_params.title.login)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(_params.title.login.complete)\n\t\t\t\t\t\t\ttt = _params.title.login.complete\n\t\t\t\t\t}\n\n\t\t\t\ttxtTitle.innerHTML = tt ;\n\n\n\t\t\t\tapp.DAL.login(txtUsername.value,txtPassword.value,\n\t\t\t\tfunction(user){\n\t\t\t\t\tcompleteLogin(user);\n\t\t\t\t},\n\t\t\t\tfunction(error){\n\t\t\t\t\tshowControls();\n\t\t\t\t\tLogin.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_mode == \"forgot\")\n\t\t\t{\n\n\t\t\t\tvar tt = \"Resetting Password...\";\n\t\t\t\tif(_params.title)\n\t\t\t\t\tif(_params.title.forgot)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(_params.title.forgot.complete)\n\t\t\t\t\t\t\ttt = _params.title.forgot.complete\n\t\t\t\t\t}\n\n\t\t\t\ttxtTitle.innerHTML = tt ;\n\t\t\t\ttxtUsername.style.visibility = 'hidden';\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\ttxtTitle.innerHTML = \"Password Reset\";\n\t\t\t\t\ttxtNote.innerHTML = \"An email was sent with a link to create a new password. <br/>Don't forget to check your spam folder, if you don't see the email\";\n\t\t\t\t\t_mode = \"signup\";\n\t\t\t\t\tbtSwitch.innerHTML = \"Login\";\n\t\t\t\t\tbtSwitch.style.visibility = 'visible';\n\t\t\t\t\t\n\t\t\t\t\ttxtPassword.style.visibility = 'hidden';\n\n\t\t\t\t},1000)\n\n\t\t\t}\n\t\t}\n\n\t\tLogin.error = function(error)\n\t\t{\n\t\t\tswithMode(_mode);\n\t\t\tLogin.showControls(true);\n\t\t\tmsgArea.innerHTML = error.code + \" \" + error.message;\n\t\t}\n\t\tLogin.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\t\tLogin.getHTML = function()\n\t\t{\n\n\n\t\t\telm.addELM(txtTitle);\n\n\t\t\tif(_params)\n\t\t\t{\n\t\t\t\tif(_params.google)\n\t\t\t\t\taSocialLogin.addELM(btGmail);\n\t\t\t\t\n\t\t\t\tif(_params.facebook)\n\t\t\t\t\taSocialLogin.addELM(btFacebook);\n\t\t\t\t\n\t\t\t\tif(_params.twitter)\n\t\t\t\t\taSocialLogin.addELM(btTwitter);\n\n\t\t\t\tif(_params.google || _params.facebook || _params.twitter)\n\t\t\t\t{\n\t\t\t\t\tvar or = cELM('DIV','loginor');\n\t\t\t\t\tor.innerHTML = 'or'\n\t\t\t\t\tif(!_isOAuthOnly)\n\t\t\t\t\t\taSocialLogin.addELM(or);\n\n\t\t\t\t\telm.addELM(aSocialLogin);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\telm.addELM(txtNote);\n\t\t\tvar c = cELM('DIV','');\n\n\t\t\tif(!_isOAuthOnly)\n\t\t\t{\n\n\t\t\t\tif(_params)\n\t\t\t\t\tif(_params.hasName)\n\t\t\t\t\t\tc.addELM(txtFullname);\n\t\t\t\t\n\t\t\t\tc.addELM(txtUsername);\n\t\t\t\tc.addELM(txtPassword);\n\t\t\t\tc.addELM(btForgot);\n\n\n\t\t\t\t\n\t\t\t\tc.addELM(btAction);\n\t\t\t\tc.addELM(btSwitch);\n\t\t\t\t\n\t\t\t\telm.addELM(c);\n\n\t\t\t}\n\n\t\t\telm.addELM(msgArea);\n\n\t\t\tswithMode(_mode);\n\n\t\t\treturn elm;\n\t\t}\n\n\n\treturn Login;\n}});\n","app.Ext(app,{controls:{\n/*--------------------*/\n\n/*Converts a bunch of input to a data model*/\nSelections:function(config)\n{\n/*\n\n\tgetData:function()\n\tfinishedSelection:function()\n\taddData; function(text,_selectionSessionData,function(newItem){}) // //selections that you can add to //\n\tsearchData;function(text,_selectionSessionData,function(results))// selections you can search with\n\tonShow;\n\tonDone;\n\tonSelect;\n\tonFocus;\n\tonBlur;\n\tonFilter;\n\tonSelect;\n\titemTemplate\n\tfooter\n\n\tsetSessionData()\n\n\t[]\n*/\n\n/*------Selection Control Sub components --------------*/\n\tvar SelectionHeader = function(config){\n\t\tvar _this = this;\n\t\tvar _onAdd = config.onAdd;\n\t\tvar _onFocus = config.onFocus;\n\t\tvar _onBlur = config.onBlur;\n\t\tvar _onKeyup = config.onKeyup\n\n\t\tvar elm = cELM('div','selection_header');\n\t\tvar loading = cELM('div','loading');\n\n\t\tvar input = cELM('input','input_text');\n\t\tvar btAdd = cELM('div','button btAdd');\n\t\tvar btOK = cELM('div','button btOK');\n\t\tbtOK.style.display = 'none';\n\n\t\tvar _completeAdd = function(results){\n\t\t\tinput.readOnly = false;\n\n\t\t\tinput.style.display = \"block\";\n\t\t\tbtOK.style.display = 'none';\n\t\t\tbtAdd.style.display = 'block';\n\n\t\t\tif(results)\n\t\t\t{\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//error\n\t\t\t}\n\t\t}\n\n\t\tvar _start = function()\n\t\t{\n\t\t\tbtAdd.style.display = 'none';\n\t\t\tbtOK.style.display = 'block';\n\t\t}\n\n\t\tvar _adding = function()\n\t\t{\n\t\t\tinput.blur();\n\t\t\tinput.style.display = \"none\";\n\t\t\tbtOK.style.display = 'none';\n\t\t\tbtAdd.style.display = 'none';\n\t\t}\n\n\t\t\n\t\tbtAdd.onclick = function(e)\n\t\t{\n\t\t\tinput.focus();\n\t\t}\n\n\t\t\n\t\tbtOK.onclick = function(event)\n\t\t{\n\t\t\t_adding();\n\t\t\t_onAdd(input.value,_completeAdd);\n\t\t}\n\n\t\tinput.onkeyup = function(e){\n\t\t\tif(_onKeyup)\n\t\t\t\t_onKeyup(input.value);\n\t\t}\n\t\tinput.onkeypress = function(e) {\n\t\t\tif(e.keyCode == 13) \n\t\t\t{\n\t\t\t\t_adding();\n\t\t\t\t_onAdd(input.value,_completeAdd);\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_start();\n\t\t\t}\n\t\t};\n\t\t_this.reset = function(e)\n\t\t{\n\t\t\tinput.value = \"\";\n\t\t\tinput.style.display = 'block';\n\t\t\tbtAdd.style.display = 'block';\n\t\t\tbtOK.style.display = 'none';\n\t\t\tinput.blur();\n\t\t}\n\n\t\tinput.onfocus = function(e){\n\t\t\tbtAdd.style.display = 'none';\n\t\t\tif(_onFocus)\n\t\t\t\t_onFocus();\n\t\t};\n\t\tinput.onblur = function(e)\n\t\t{\n\n\t\t\tif(_onBlur)\n\t\t\t\t_onBlur();\n\n\t\t\tif(!IsEmpty(input.value))\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinput.style.display = 'block';\n\t\t\t\tbtAdd.style.display = 'block';\t\t\t\n\t\t\t\tbtOK.style.display = 'none';\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\telm.addELM(loading);\n\t\t\telm.addELM(input);\n\t\t\telm.addELM(btAdd);\n\t\t\telm.addELM(btOK);\n\n\t\t\treturn elm;\n\t\t}\n\n\t};\n\n\tvar SelectionSearchHeader = function(config){\n\t\tvar _this = this;\n\t\tvar _onSearch = config.onSearch;\n\t\tvar _onFocus = config.onFocus;\n\t\tvar _onBlur = config.onBlur;\n\t\tvar _onFilter = config.onFilter;\n\t\tvar _onKeyup = config.onKeyup;\n\n\t\tvar elm = cELM('div','selection_header selection_search');\n\t\tvar loading = cELM('div','loading');\n\n\t\tvar input = cELM('input','input_text');\n\t\tvar btSearch = cELM('div','button btSearch');\n\t\tvar btOK = cELM('div','button btOK');\n\t\tbtOK.style.display = 'none';\n\n\t\tvar isFirstFocus = false;\n\n\t\tvar _completeSearch = function(results){\n\t\t\tinput.readOnly = false;\n\n\t\t\t//input.style.display = \"block\";\n\t\t\t//btOK.style.display = 'none';\n\t\t\t//btSearch.style.display = 'block';\n\n\t\t\tif(results)\n\t\t\t{\n\t\t\t\t//input.value = \"\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//error\n\t\t\t}\n\t\t}\n\n\t\tvar _start = function()\n\t\t{\n\t\t\tbtSearch.style.display = 'none';\n\t\t\tbtOK.style.display = 'block';\n\t\t}\n\n\t\tvar _searching = function()\n\t\t{\n\t\t\tinput.blur();\n\t\t\t//input.style.display = \"none\";\n\t\t\t//btOK.style.display = 'none';\n\t\t\t//btSearch.style.display = 'none';\n\t\t}\n\n\t\t\n\t\tbtSearch.onclick = function(e)\n\t\t{\n\t\t\tinput.focus();\n\t\t}\n\n\t\t\n\t\tbtOK.onclick = function(event)\n\t\t{\n\t\t\t_searching();\n\t\t\t_onSearch(input.value,_completeSearch);\n\t\t}\n\n\t\tinput.onKeyup = function(e)\n\t\t{\n\t\t\tif(_onFilter)\n\t\t\t\t_onFilter(input.value);\n\t\t}\n\t\t\n\t\tinput.onkeypress = function(e) {\n\t\t\t\n\t\t\tif(e.keyCode == 13) \n\t\t\t{\n\t\t\t\t_searching();\n\t\t\t\t_onSearch(input.value,_completeSearch);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_start();\n\t\t\t}\n\t\t};\n\t\t\n\t\t_this.reset = function(e)\n\t\t{\n\t\t\tinput.value = \"\";\n\t\t\tinput.style.display = 'block';\n\t\t\tbtSearch.style.display = 'block';\n\t\t\tbtOK.style.display = 'none';\n\t\t\tinput.blur();\n\t\t}\n\t\tinput.onfocus=function(e){\n\t\t\tbtSearch.style.display = 'none';\n\t\t\tif(_onFocus)\n\t\t\t{\n\t\t\t\tif(!isFirstFocus)\n\t\t\t\t{\n\t\t\t\t\tisFirstFocus = true;\n\t\t\t\t\t_onFocus();\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t};\n\n\t\tinput.onblur = function(e)\n\t\t{\n\n\t\t\tif(_onBlur)\n\t\t\t\t_onBlur();\n\n\t\t\tif(!IsEmpty(input.value))\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//isFirstFocus = false;\n\t\t\t\tinput.style.display = 'block';\n\t\t\t\tbtSearch.style.display = 'block';\t\t\t\n\t\t\t\tbtOK.style.display = 'none';\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\telm.addELM(loading);\n\t\t\telm.addELM(input);\n\t\t\telm.addELM(btSearch);\n\t\t\telm.addELM(btOK);\n\n\t\t\treturn elm;\n\t\t}\n\n\t};\n\n\tvar SelectionItem = function(data,params){\n\t\tvar _this = this;\n\t\tvar _data = data;\n\t\tvar _isSelect = data.isSelected;\n\t\tvar _template = params.template;\n\t\tvar _onSelect = params.onSelect;\n\n\n\t\tvar elm = cELM('div','selection');\n\t\t\n\t\t_this.update = function(data)\n\t\t{\n\t\t\t_data = data;\n\t\t\t_isSelect = data.isSelected;\n\n\t\t\telm.className = _isSelect ? \"selection selected\" : \"selection\";\n\t\t},\n\n\t\t_this.getData = function()\n\t\t{\n\t\t\treturn _data;\n\t\t}\n\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\tif(_template)\n\t\t\t{\n\t\t\t\tvar result = _template(_data);\n\t\t\t\telm.innerHTML = result;\n\t\t\t}\n\t\t\t\n\t\t\t_this.update(_data);\n\n\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.select = function(isSelect,e)\n\t\t{\n\t\t\t_data.isSelected = isSelect;\n\t\t\t_this.update(_data);\n\n\t\t\t_onSelect(_isSelect,_data,e);\n\t\t}\n\n\t\tif(_data.onclick)\n\t\t\telm.onclick = _data.onclick\n\t\telse\t\n\t\t\telm.onclick = function(e)\n\t\t\t{\n\t\t\t\t_this.select(!_isSelect,e);\n\t\t\t}\n\n\t\treturn _this;\n\n\t}\n/*------Selection Control Logic Here --------------*/\n\tvar _this = this;\n\tvar _items = {};\n\tvar _config = config;\n\tvar _selectedItems = {};\n\tvar _unSelectedItems = {};\n\tvar _selectionSessionData = null;\n\n\t\n\tvar _getData = config.getData;\n\tvar _finishedSelection = config.finishedSelection;\n\tvar _addData = config.addData;\n\tvar _searchData = config.searchData;\n\tvar _onShow = config.onShow;\n\tvar _onDone = config.onDone;\n\tvar _onSelectHandler = config.onSelect;\n\tvar _onFocus = config.onFocus;\n\tvar _onBlur = config.onBlur;\n\tvar _onFilter = config.onFilter;\n\tvar _onSelect = cELM.onSelect;\n\n\tvar _footer = config.footer;\n\n\tvar _originalData = [];\n\n\tvar _itemTemplate = null;\n\tif(config.itemTemplate)\n\t\t_itemTemplate = config.itemTemplate;\n\n\n\tvar elm = cELM('div','selections');\n\tif(config.cssName)\n\t\telm = cELM('div','selections '+config.cssName);\n\n\n\t\n\tvar content = cELM('div','content');\n\tvar content_scroll = cELM('div','content_scroll');\n\n\tvar loadingSpinner = cELM('div','background_text');\n\tloadingSpinner.innerHTML = 'Loading...';\n\tloadingSpinner.style.display = 'block';\n\tcontent_scroll.addELM(loadingSpinner);\n\n\n\tvar plcHolder = cELM('div','placeholder_empty');\n\tif(_config.emptyMessage)\n\t{\n\t\tplcHolder.innerHTML = _config.emptyMessage;\n\t\tplcHolder.style.display = 'none';\n\t\tcontent_scroll.addELM(plcHolder);\n\t}\n\t\n\n\tvar addingElm = cELM('div','selection adding')\n\taddingElm.innerHTML = \"Adding ...\"\n\n\tvar btDone = cELM('div','btDone');\n\tbtDone.style.display = 'none';\n\tbtDone.onclick = function(e)\n\t{\n\t\t_this.onDone();\n\t}\n\n\t//updates the data without changing states\n\tvar _refreshData = function(data)\n\t{\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\n\n\t\tfor(var i = 0; i < data.length; i++)\n\t\t{\n\t\t\t_addEntry(data[i],false);\n\t\t}\n\n\t\tif(data.length == 0)\n\t\t{\n\t\t\tif(_config.emptyMessage)\n\t\t\t{\n\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\tplcHolder.style.display = \"block\";\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\n\tvar _addEntry = function(data,isInsert)\n\t{\n\t\tvar id = null;\n\t\tif(data.id)\n\t\t\tid = data.id\n\t\telse if(data._id)\n\t\t\tid = data._id\n\n\t\tif(!_items[id])\n\t\t{\n\t\t\tvar d = new SelectionItem(data,{\n\t\t\t\ttemplate:_itemTemplate,\n\t\t\t\tonSelect:_this.onSelect\n\t\t\t});\n\n\t\t\t_items[id] = d;\n\t\t\tif(isInsert)\n\t\t\t{\n\t\t\t\tcontent.insertELM(d);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcontent.addELM(d);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_items[id].update(data);\n\t\t}\n\t}\n\n\tvar header  = null;\n\tif(_addData)\n\t{\n\n\t\theader = SelectionHeader({\n\t\t\tonKeyup:function(value){\n\t\t\t\tif(_onFilter)\n\t\t\t\t\t_onFilter(value,_originalData,_refreshData);\n\t\t\t},\n\t\t\tonFocus:function(){\n\t\t\t\tif(_onFocus)\n\t\t\t\t\t_onFocus(_this.update);\n\t\t\t},\n\t\t\tonBlur:function(){\n\t\t\t\tif(_onBlur)\n\t\t\t\t\t_onBlur(_this.update);\n\t\t\t},\n\t\t\tonAdd:function(text,callback){\n\n\t\t\t\tcontent.insertELM(addingElm);\n\n\t\t\t\t_addData(text,_selectionSessionData,function(newLists){\n\t\t\t\t\t\n\n\t\t\t\t\taddingElm.parentNode.removeChild(addingElm);\n\n\t\t\t\t\tcallback(newLists);\n\n\t\t\t\t\t_showOriginalData();\n\t\t\t\t\t\n\t\t\t\t\tfor(var i = 0; i < newLists.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar newList = newLists[i];\n\t\t\t\t\t\tnewList.isSelected = true;\n\t\t\t\t\t\t_addEntry(newList,true);\n\n\t\t\t\t\t\tvar id = null;\n\t\t\t\t\t\tif(newList.id)\n\t\t\t\t\t\t\tid = data.id\n\t\t\t\t\t\telse if(newList._id)\n\t\t\t\t\t\t\tid = newList._id\n\n\t\t\t\t\t\t_selectedItems[id] = newList;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcontent_scroll.scrollTop = 0;\n\n\n\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t}\n\telse if (_searchData)\n\t{\n\t\tvar clearContent = function(){\n\n\t\t\tcontent.scrollTop = 0;\n\n\t\t\t_selectedItems = {};\n\t\t\t_unSelectedItems = {};\n\n\t\t\tfor(var id in _items)\n\t\t\t{\n\t\t\t\tvar item = _items[id];\n\n\t\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t\t}\n\t\t\t_items = [];\n\n\t\t};\n\t\theader = new SelectionSearchHeader({\n\t\t\tonFocus:function(){\n\t\t\t\tif(_onFocus)\n\t\t\t\t{\n\t\t\t\t\tclearContent();\n\t\t\t\t\t_onFocus(_this.update,_originalData,_refreshData);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonBlur:function(){\n\t\t\t\tif(_onBlur)\n\t\t\t\t\t_onBlur(_this.update);\n\t\t\t},\n\t\t\tonSearch:function(text,callback){\n\n\n\n\t\t\t\tplcHolder.style.display = \"none\";\n\n\n\t\t\t\tloadingSpinner.style.display = \"block\";\n\n\n\t\t\t\tclearContent();\n\n\t\t\t\t\n\t\t\t\t_searchData(text,_selectionSessionData,function(results){\n\t\t\t\t\t\n\t\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tcallback(results);\n\n\t\t\t\t\tfor(var i = 0; i < results.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar result = results[i];\n\t\t\t\t\t\t_addEntry(result,true);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcontent_scroll.scrollTop = 0;\n\n\n\t\t\t\t\tif(results.length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(_config.emptyMessage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tplcHolder.innerHTML = \"Can't find a friend? <br/>\" + '<a class=\"email\" title=\"Email a friend\" href=\"\" onclick=\"javascript:window.location=\\'mailto:?subject=Feedback on Bestlyst?&body=I thought you might have great feedback or ideas for Bestlyst: \\' + window.location;\">Invite</a>'\n\t\t\t\t\t\t\t +\" them to bestlyst.\";\n\t\t\t\t\t\t\tplcHolder.style.display = 'block';\n\t\t\t\t\t\t\tcontent_scroll.addELM(plcHolder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tvar _showOriginalData = function()\n\t{\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\t\n\t\t\t\t\t\t\n\t\tfor(var i = 0; i < _originalData.length; i++)\n\t\t{\n\t\t\t_addEntry(_originalData[i],false);\n\t\t}\t\n\t}\n\n\n\tvar _clearData = function()\n\t{\n\t\t_selectedItems = {};\n\t\t_unSelectedItems = {};\n\n\t\tbtDone.style.display = 'none';\n\t\tplcHolder.style.display = \"none\";\n\t\tif(header)\n\t\t\theader.getELM().style.display = 'none';\n\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\n\n\t\tcontent.style.display = 'block';\n\n\n\t}\n\n\t_this.getELM = function()\n\t{\n\t\treturn elm;\n\t}\n\t\n\n\t_this.getHTML = function()\n\t{\n\t\tif(_addData || _searchData)\n\t\t\telm.addELM(header);\n\n\n\t\tif(_config.headerTemplate)\n\t\t{\n\t\t\telm.addELM(_config.headerTemplate);\n\t\t}\n\n\t\tcontent_scroll.addELM(content);\n\t\telm.addELM(content_scroll);\n\t\t\n\t\t\n\t\tif(_footer)\n\t\t\telm.addELM(_footer);\n\t\t\n\t\tif(_itemTemplate)\n\t\t\telm.addELM(btDone);\n\t\t\n\t\t\n\n\t\treturn elm;\n\t}\n\t_this.onSelect = function(isSelected,data,e){\n\n\n\t\tvar id = null;\n\t\tif(data.id)\n\t\t\tid = data.id\n\t\telse if(data._id)\n\t\t\tid = data._id\n\n\t\tif(isSelected)\n\t\t{\n\t\t\t_selectedItems[id] = data;\n\t\t\tif(_unSelectedItems[id])\n\t\t\t\tdelete _unSelectedItems[id];\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_unSelectedItems[id] = data;\n\t\t\tif(_selectedItems[id])\n\t\t\t\tdelete _selectedItems[id];\n\t\t}\n\n\t\tif(_onSelectHandler)\n\t\t\t_onSelectHandler(isSelected,data,e);\n\n\n\t}\n\t\n\t_this.getSelections = function(){\n\t\treturn {\n\t\t\tsession:_selectionSessionData,\n\t\t\tselected:_selectedItems,\n\t\t\tunselected:_unSelectedItems\n\t\t}\n\t}\n\n\n\t_this.update = function(data)\n\t{\n\t\tif(data)\n\t\t{\t\n\t\t\t_originalData = data;\n\n\t\t\tbtDone.style.display = 'block';\n\t\t\tif(header)\n\t\t\t\theader.getELM().style.display = 'block';\n\n\t\t\tif(data.length > 0)\n\t\t\t{\n\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\tplcHolder.style.display = \"none\";\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(_config.emptyMessage)\n\t\t\t\t{\n\t\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\t\tplcHolder.style.display = \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\tfor(var i = 0; i < data.length; i++)\n\t\t\t{\n\t\t\t\t_addEntry(data[i],false);\n\t\t\t}\n\t\n\t\t\tif(_footer)\n\t\t\t\t_footer.show();\n\t\t}\n\t}\n\n\n\t_this.disableContent = function(message){\n\t\t\n\t\tbtDone.style.display = 'none';\n\t\tif(header)\n\t\t\theader.getELM().style.display = 'none';\n\n\t\tcontent.scrollTop = 0;\n\n\t\tcontent.style.display = 'none';\n\n\t\tif(message)\n\t\t\tloadingSpinner.innerHTML = message;\n\t\n\t\t\n\t\tloadingSpinner.style.display = \"block\";\n\t}\n\t_this.finish = function()\n\t{\n\t\tif(header)\n\t\t\theader.reset();\n\t\tif(_finishedSelection)\n\t\t\t_finishedSelection(_selectionSessionData,_selectedItems,_unSelectedItems);\t\t\n\t}\n\t_this.show = function(isShow)\n\t{\n\t\t\n\t\tif(isShow == true)\n\t\t{\t\t\n\t\t\t_clearData();\n\n\t\t\tloadingSpinner.style.display = \"block\";\n\t\t\tloadingSpinner.innerHTML = 'Loading...';\n\n\n\t\t\tif(_getData)\n\t\t\t{\n\t\t\t\tif(_footer)\n\t\t\t\t\t_footer.hide();\n\n\t\t\t\t_getData(_selectionSessionData,_this.update);\n\t\t\t}\n\t\t}\n\n\t\tif(_onShow)\n\t\t\t_onShow(isShow);\n\t}\n\t_this.setSessionData = function(sdata) //this gets passed back when done\n\t{\n\t\t_selectionSessionData = sdata;\n\t\tif(_footer)\n\t\t\tif(_footer.setSessionData)\n\t\t\t\t_footer.setSessionData(sdata);\n\t},\n\t_this.onDone = function()\n\t{\n\t\tif(_onDone)\n\t\t\t_onDone();\n\t}\n\n\treturn _this;\n\n\n},\nBindInputsToData:function(params,data)\n{\n\n\tvar _this = this;\n\n\t\"use strict\";\n\t//private variables\n\tvar model = {};\n\tvar _data = data;\n\tvar _css = params.css,\n\t\t_onChange = params.onChange,\n\t\t_onAdd = params.onAdd,\n\t\t_onDelete = params.onDelete;\n\n\tif(!_data)\n\t\t_data = {};\n\n\tvar _allInputElms = {};\n\tvar _allRowElms = {};\n\n\n\t//DOM elements / templates here\n \tvar _elm = cELM('div',_css);\n \tif(params.template)\n \t\t_elm.innerHTML = params.template;\n \telse if(params.dom)\n \t\t_elm = params.dom;\n\n\n \tvar _change = function(e){\n \t\tvar data_type = this.getAttribute('data-type');\n \t\tvar data_value = this.getAttribute('data-value')\n \t\tvar data_table_column = this.getAttribute('data-table-column');\t\n \t\tvar type = this.type;\n\n \t\tvar source = this.source;\n \t\tvar rowIdx = this.rowIdx;\n \t\tvar column = this.column;\n\n \t\tif(data_type == 'picker')\n \t\t{\n \t\t\tif(!_data[this.source])\n \t\t\t\t_data[this.source] = [];\n\n \t\t\tif(data_table_column)\n \t\t\t{\n\t \t\t\tif(this.checked)\n\t \t\t\t{\n\t \t\t\t\tvar rowData = {}\n\t\t\t\t\trowData.guid = guidGenerator();\n\t\t\t\t\trowData[data_table_column] = data_value;\n\n\t \t\t\t\t_data[this.source].push(rowData);\n\n\t \t\t\t\t//TODO add row if applicable\n\t \t\t\t}\n\t \t\t\telse\n\t \t\t\t{\n\t \t\t\t\tvar removeIdx = -1;\n\t \t\t\t\tfor(var i = 0; i < _data[this.source].length; i++)\n\t \t\t\t\t{\n\t \t\t\t\t\tvar rowData = _data[this.source][i];\n\t \t\t\t\t\tif(rowData[data_table_column] == data_value)\n\t \t\t\t\t\t\tremoveIdx = i;\n\t \t\t\t\t}\n\n\t \t\t\t\t_data[this.source].splice(removeIdx,1);\n\n\t \t\t\t\t//TODO remove\n\t \t\t\t} \t\t\n\n \t\t\t}\n \t\t\telse\n \t\t\t{\n\t \t\t\tif(this.checked)\n\t \t\t\t{\n\t \t\t\t\t_data[this.source].push(data_value);\n\t \t\t\t}\n\t \t\t\telse\n\t \t\t\t{\n\t \t\t\t\tvar removeIdx = -1;\n\t \t\t\t\tfor(var i = 0; i < _data[this.source].length; i++)\n\t \t\t\t\t{\n\t \t\t\t\t\tvar v = _data[this.source][i];\n\t \t\t\t\t\tif(v == data_value)\n\t \t\t\t\t\t\tremoveIdx = i;\n\t \t\t\t\t}\n\n\t \t\t\t\t_data[this.source].splice(removeIdx,1);\n\t \t\t\t} \t\t\t\t\n \t\t\t}\n\n\n \t\t\t\n \t\t}\n \t\telse if(type == 'select-one')\n \t\t{\n \t\t\t_data[this.source] = this.options[this.selectedIndex].value;\n \t\t}\n\t\telse\n\t\t{\n\t\t\tvar dValue = null;\n\t\t\tif(type =='checkbox' || type == 'radio')\n\t\t\t{\n\t\t\t\tvar groupname = this.getAttribute('name');\n\t\t\t\tif(groupname)\n\t\t\t\t{\n\t\t\t\t\tvar relatedInputs = document.querySelectorAll('input[name=\"'+groupname+'\"]');\n\t\t\t\t\tfor(var ri = 0; ri < relatedInputs.length; ri++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar relatedInput = relatedInputs[ri]\n\t\t\t\t\t\tvar rSource = relatedInput.getAttribute('data-src');\n\t\t\t\t\t\tif(_data[rSource])\n\t\t\t\t\t\t\t_data[rSource] = false;\n\t\t\t\t\t}\t\t\n\t\t\t\t}\n\n\t\t\t\tdValue = this.checked;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdValue = this.value;\n\t\t\t}\n\n\n\t\t\tif(rowIdx === undefined)\n\t\t\t{\n\t\t\t\t_data[this.source] = dValue;\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_data[this.source][rowIdx][column] = dValue;\n\t\t\t}\n\t\n\t\t\t\t\n\t\t}\n\n\t\t\n\t\tif(_onChange)\n\t\t\t_onChange(this.source,this); \t\t\n \t}\n\n \tvar bindInput = function(element,data,attribute,prefixHash)\n \t{\n \t\t\n\n \t\tvar qs =[\"select\",\"input[\"+attribute+\"]\",\"textarea[\"+attribute+\"]\"],\n \t\t\tinputs = [];\n\n \t\tfor(var i = 0; i < qs.length; i++)\n \t\t{\n \t\t\tvar q = qs[i];\n \t\t\tvar inps = element.querySelectorAll(q);\n \t\t\tfor(var j = 0; j < inps.length; j++)\n \t\t\t{\n \t\t\t\tinputs.push(inps[j])\n \t\t\t}\n \t\t}\n\n\t\tfor(var i = 0; i < inputs.length; i++)\n\t\t{\n\t\t\tvar data_type = inputs[i].getAttribute('data-type');\n\t\t\tvar data_value = inputs[i].getAttribute('data-value');\n\t\t\tvar data_column = inputs[i].getAttribute('data-table-column');\n\t\t\tvar type = inputs[i].type;\n\t\t\tvar inp = inputs[i];\n\t\t\tvar prop = inputs[i].getAttribute(attribute);\n\n\t\t\tinp.source = prop;\n\t\t\tinp.onchange = _change;\n\t\t\tinp.onkeyup = _change;\n\t\t\t\n\t\t\t//row items\n\t\t\tvar refHash = inp.source;\n\n\t\t\tif(prefixHash) // for table data\n\t\t\t{\n\t\t\t\tvar parts = prefixHash.split('|');\n\t\t\t\tvar tb = parts[0];\n\t\t\t\tvar rowIdx = parts[1];\n\n\t\t\t\tinp.source = tb;\n\t\t\t\tinp.rowIdx = rowIdx;\n\t\t\t\tinp.column = data_column;\n\n\t\t\t\tif(!_allInputElms[tb])\n\t\t\t\t\t_allInputElms[tb] = [];\n\n\t\t\t\tif(!_allInputElms[tb][rowIdx])\n\t\t\t\t\t_allInputElms[tb][rowIdx] = {};\n\n\t\t\t\t_allInputElms[tb][rowIdx][data_column] = inp;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(data_column)\n\t\t\t\t\tif(data_column != prop)\n\t\t\t\t\t{\n\t\t\t\t\t\trefHash = refHash + '|'+data_column; \n\t\t\t\t\t}\n\n\t\t\t\tif(data_value)\n\t\t\t\t{\n\t\t\t\t\trefHash = refHash + '|'+data_value; \n\t\t\t\t}\n\n\t\t\t\tif(!_allInputElms[refHash])\n\t\t\t\t{\n\t\t\t\t\t_allInputElms[refHash] = inp;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(attribute != 'data-table-column' && data_type ? data_type != 'picker' : false)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log('duplicate: '+refHash);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\n\n\t\t}\n\n \t}\n\n \tvar tables = _elm.querySelectorAll('div[data-format=\"table\"]');\n \t\n \tvar onAddRow = function(e,data,rowIdx)\n \t{\n\t\tvar rowData = {}\n\t\trowData.guid = guidGenerator();\t\n\t\tif(data)\n\t\t\trowData = data;\n\t\t\n\t\tvar idx = 0;\n\t\tif(rowIdx !== undefined)\n\t\t{\n\t\t\tidx = rowIdx;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(_data[this.source])\n\t\t\t\tidx = _data[this.source].length;\n\t\t}\n\n\n\t\tvar row = this.template.cloneNode(true);\n\t\tbindInput(row,rowData,'data-table-column',this.source+'|'+idx);\n\t\trow.guid = rowData.guid;\n\n\t\tif(!_allRowElms[this.source])\n\t\t\t_allRowElms[this.source] = [];\n\n\t\t_allRowElms[this.source][idx] = row;\n\n\t\t//clear template data\n\t\tfor(var i = 0; i < row.childNodes.length; i++)\n\t\t{\n\t\t\tvar r = row.childNodes[i];\n\t\t\tif(r.nodeName == \"INPUT\")\n\t\t\t\tr.value = null;\n\t\t}\n\n\t\tvar btDelete = row.querySelector('div[data-control=\"delete\"]');\n\t\tif(btDelete)\n\t\t{\n\t\t\tbtDelete.template = row;\n\t\t\tbtDelete.source = prop;\n\t\t\tbtDelete.onclick = function(e)\n\t\t\t{\n\t\t\t\tif(this.template.parentNode)\n\t\t\t\t\tthis.template.parentNode.removeChild(this.template);\n\n\t\t\t\tvar d = _data[this.source];\n\t\t\t\tvar deleteIdx = -1;\n\t\t\t\tfor(var i = 0; i < d.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar guid = d[i].guid\n\t\t\t\t\tif(guid)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(guid == this.template.guid)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeleteIdx = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(deleteIdx > -1)\n\t\t\t\t{\n\t\t\t\t\t_allInputElms[this.source].splice(deleteIdx,1);\n\t\t\t\t\t_data[this.source].splice(deleteIdx,1);\n\t\t\t\t\t//console.log(_data[this.source]);\n\t\t\t\t\t_onChange(this.source,this);\n\t\t\t\t}\n\n\n\t\t\t} \t\t\t\t\n\t\t}\n\t\t\n\t\tthis.parentNode.insertBefore(row,this);\n\t\t\n\t\tif(!data)\n\t\t{\n\t\t\t//created new entry\n\t\t\t_data[this.source].push(rowData);\n\t\t}\n\n \t}\n \t\n \tbindInput(_elm,_data,'data-src');\n\n \t\n \tfor(var i = 0; i < tables.length; i++)\n \t{\n \t\tvar tb = tables[i];\n \t\tvar prop = tb.getAttribute('data-src');\n \t\tvar rowTemplate = tb.querySelector('div[data-format=\"row\"]');\n\n \t\tvar btAdd = tb.querySelector('div[data-control=\"add\"]');\n \t\tbtAdd.template = rowTemplate;\n \t\tbtAdd.source = prop;\n \t\tbtAdd.onclick = onAddRow;\n\n \t\trowTemplate.parentNode.removeChild(rowTemplate);\n\n \t\n \t\tif(!_data[prop])\n\t\t{\n\t\t\t_data[prop] = [];\n\t\t\tbtAdd.onclick();\n\t\t}\n\t\telse if (_data[prop].length == 0)\n\t\t{\n\t\t\tbtAdd.onclick();\t\n\t\t}\n\t\telse\n \t\t{\n\t\t\tfor(var k = 0; k < _data[prop].length; k++)\n \t\t\t{\n \t\t\t\tvar d = _data[prop][k];\n \t\t\t\tbtAdd.onclick(null,d,k);\n \t\t\t}\n \t\t}\n\n \t}\n\n \tvar _setInputValue = function(inp,dateInputValue)\n \t{\n \t\tvar type = inp.type;\n\t\tvar data_src = inp.getAttribute('data-src');\n\t\tvar data_type = inp.getAttribute('data-type');\n\t\tvar data_value = inp.getAttribute('data-value');\n\t\tvar data_column = inp.getAttribute('data-table-column');\n\t\t\n\t\tif(data_type == 'picker')\n\t\t{\n\t\t\tinp.checked = true;\n\t\t}\n\t\telse if(type == 'checkbox' || type == 'radio')\n\t\t{\n\t\t\tinp.checked = dateInputValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinp.value = dateInputValue;\n\t\t}\t\t\n \t}\n\n \t_this.update = function(dataSet)\n \t{\n \t\t//check to see if array elements needs to be synced\n \t\t//_data = dataSet; @aaronrau, cannot break reference here for binding\n \t\tfor(var p in dataSet)\n \t\t{\n \t\t\tvar updatedTables = dataSet[p];\n \t\t\tif(Array.isArray(updatedTables))\n \t\t\t{\n \t\t\t\tvar diff = updatedTables.length - _data[p].length;\n\n \t\t\t\t//need to add elements from UI\n\t\t\t\tif(diff > 0)\n\t\t\t\t{\n\t \t\t\t\tfor(var i = 0; i < tables.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tb = tables[i];\n\t\t\t\t \t\tvar prop = tb.getAttribute('data-src');\n\t\t\t\t \t\tif(prop == p)\n\t\t\t\t \t\t{\n\t\t\t\t\t \t\tvar btAdd = tb.querySelector('div[data-control=\"add\"]');\n\t\t\t\t\t \t\tif(btAdd)\n\t\t\t\t\t \t\t{\n\t\t\t\t\t \t\t\tvar l = updatedTables.length;\n\t\t\t\t\t\t\t\tfor(var k = l-diff; k < updatedTables.length; k++)\n\t\t\t\t\t \t\t\t{\n\t\t\t\t\t \t\t\t\tvar d = updatedTables[k];\n\t\t\t\t\t \t\t\t\tbtAdd.onclick(null,d,k);\n\t\t\t\t\t \t\t\t}\n\t\t\t\t\t \t\t}\n\n\t\t\t\t \t\t}\t\t\n\t\t\t\t\t}\n\n\t\t\t\t}//need to remove elements for UI\n\t\t\t\telse if(diff < 0)\n\t\t\t\t{\n\t\t\t\t\tvar l = _allRowElms[p].length;\n\t\t\t\t\tfor(var i = l + diff; i < Math.abs(l); i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar rowElm = _allRowElms[p][i];\n\t\t\t\t\t\tif(rowElm.parentNode)\n\t\t\t\t\t\t\trowElm.parentNode.removeChild(rowElm);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor(var i = 0; i < Math.abs(diff);i++)\n\t\t\t\t\t{\n\t\t\t\t\t\t_allRowElms[p].splice(_allRowElms[p].length -1,1);\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n \t\t\t}\n\n \t\t\t_data[p] = dataSet[p];\n \t\t}\n\n \t\n \t\tfor(var prop in _data)\n \t\t{\n \t\t\tvar value = _data[prop]; \t\n \t\t\tif(Array.isArray(value))\n \t\t\t{\n \t\t\t\t\n \t\t\t\tfor(var i = 0; i < value.length; i++)\n \t\t\t\t{\n \t\t\t\t\t\n \t\t\t\t\tvar rowData = value[i];\n \t\t\t\t\tvar row = i;\n\n \t\t\t\t\tif(_allInputElms[prop])\n \t\t\t\t\t\tif(_allInputElms[prop][row])\n\t \t\t\t\t\t{\n\t\t \t\t\t\t\tfor(var rProp in rowData)\n\t\t \t\t\t\t\t{\n\t\t \t\t\t\t\t\tvar rowItemValue = rowData[rProp];\n\t\t \t\t\t\t\t\tvar column = rProp;\n\t\t \t\t\t\t\t\tvar pickerHash = prop+'|'+rProp+'|'+rowItemValue;\n\t\t \t\t\t\t\n\t\t \t\t\t\t\t\tif(_allInputElms[prop][row][column])\n\t\t \t\t\t\t\t\t{\t\t\t\n\t\t \t\t\t\t\t\t\t_setInputValue(_allInputElms[prop][row][column],rowItemValue);\n\t\t \t\t\t\t\t\t}\n\n\t\t \t\t\t\t\t\tif(_allInputElms[pickerHash.trim()])\n\t\t \t\t\t\t\t\t{\n\t\t \t\t\t\t\t\t\t_setInputValue(_allInputElms[pickerHash.trim()],rowItemValue);\n\t\t \t\t\t\t\t\t}\n\t\t \t\t\t\t\t}\n\t \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t\telse\n \t\t\t{\n \t\t\t\tvar hash = prop;\n \t\t\t\t\n \t\t\t\tif(_allInputElms[hash])\n \t\t\t\t\t_setInputValue(_allInputElms[hash],value);\n \t\t\t}\n \t\t}\n\n\n\n \t}\n\t_this.getData = function()\n\t{\n\t\treturn _data;\n\t}\n\n\t_this.getELM = function()\n\t{ //just returns the main element\n\t\treturn _elm;\n\t}\n\n\t_this.getHTML = function()\n\t{ //build / render html elements here\n\n\t\treturn _elm;\n\t}\n\n\n\t_this.update(_data);\n\n\treturn _this;\n},\n/*Convert a model into a bunch of input fields*/\nBindModelToInputs:function(className,model,mode,onChange)\n{\n\n\n\n\tvar elm = cELM('div',className);\n\n\tfor(var prop in model)\n\t{\n\t\tif(mode == 'form' || mode == 'form_withLabel')\n\t\t{\n\t\t\tvar isArray = false;\n\t\t\tif (Array.isArray)\n\t\t\t{\n\t    \t\tif (Array.isArray(model[prop]))\n\t    \t\t\tisArray = true;\n\t    \t}\n\t    \telse if( Object.prototype.toString.call( model[prop] ) === '[object Array]' )\n\t    \t\tisArray = true;\n\n\t    \tif(isArray)\n\t    \t\tfor(i = 0; i <  model[prop].length; i++)\n\t    \t\t{\n\n\t    \t\t}\n\t\t}\n\t\telse if(mode == 'data')\n\t\t{\n\t\t\tif(typeof model[prop] === \"object\")\n\t\t\t{\n\t\t\t\tfor(subProp in model[prop])\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn elm;\n},\n/*Popover buttons*/\nExpandButton:function(params){\n\t\tvar ExpandButton ={}\n\n\t\t/*\n\t\tparams = {\n\t\t\tbutton_text:'+',\n\t\t\tclassname:'list_add',\n\t\t\tselections:[\n\t\t\t\t{\n\t\t\t\t\tclassname:'btUpload',\n\t\t\t\t\ttext:'Upload',\n\t\t\t\t\tdetailText:'upload an existing list from the web',\n\t\t\t\t\tonclick:function(){}\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\t*/\n\n\n\t\t//Private Property\n\t\tvar _data = {}\n\t\t\t,_params = params\n\t\t\t,_isClosing = false\n\t\t\t,_isShowing = false\n\t\t\t,_showingTimer = null\n\t\t\t,_closingTimer = null\n\t\t\t,_selections = []\n\t\t\t,_resizeTimer = null;\n\n\n\t\tvar elm = cELM('div','button_expand '+ _params.classname);\n\t\n\t\tvar main_button = cELM('div','button');\n\t\tmain_button.innerHTML = params.button_text;\n\n\t\tvar expand = cELM('div','expand');\n\t\texpand.style.display = 'none';\n\t\tif(_params.mode)\n\t\tif(_params.mode == 'global')\n\t\t{\n\t\t\texpand.className = 'expand button_expand_global '+(_params.glocalClassname ? _params.glocalClassname : \"\");\n\t\t}\n\n\t\tvar a2 = cELM('div','arrow_up2');\n\t\texpand.addELM(a2);\n\n\t\tvar spacing = cELM('div','spacing');\n\t\tspacing.innerHTML = \"\";\n\t\texpand.addELM(spacing);\n\n\t\tvar _onResize = function(e){\n\n\t\t\tif(expand.style.display == 'block')\n\t\t\t\tapp.Controller.showPopover(ExpandButton,'resize');\n\n\t\t}\n\n\t\tvar _onScroll = function(e)\n\t\t{\n\t\t\tif(expand.style.display == 'block')\n\t\t\t\tapp.Controller.showPopover(ExpandButton,'scroll');\t\t\t\n\t\t}\n\n\t\tvar _onSelect = function(e){\n\t\t\tif (!e) var e = window.event;\n\t        \te.cancelBubble = true;\n\t    \tif (e.stopPropagation) e.stopPropagation();\n\t    \tif (e.preventDefault) e.preventDefault();\n\n\t\t\t\n\n\t\t\tif(this.selection.onclick)\n\t\t\t{\n\t\t\t\t// let click event handle this\n\t\t\t\tthis.selection.onclick(e,this.reference);\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tapp.Controller.closePopovers(); \n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t}\n\n\t\tfor(var i = 0;i < params.selections.length;i++)\n\t\t{\n\t\t\tvar d = params.selections[i];\n\n\t\t\tif(d.control)\n\t\t\t{\n\t\t\t\tvar button = cELM('div','section '+d.classname);\n\t\t\t\tbutton.addELM(d.control);\n\t\t\t\tbutton.reference = _params.reference;\n\t\t\t\texpand.addELM(button);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar button = cELM('div','section '+d.classname);\n\t\t\t\tbutton.selection = d;\n\t\t\t\tbutton.reference = _params.reference;\n\t\t\t\tbutton.onmousedown = _onSelect;\n\n\t\t\t\tvar icon = cELM('div','icon');\n\n\t\t\t\tif(d.icon)\n\t\t\t\t\ticon.style.backgroundImage = \"url('\"+d.icon+\"')\";\n\t\t\t\t\n\t\t\t\tbutton.addELM(icon);\n\n\t\t\t\tvar txt = cELM('div','text');\n\t\t\t\ttxt.innerHTML = d.text;\n\t\t\t\tbutton.addELM(txt);\n\n\t\t\t\tvar dtxt = cELM('div','detail_text');\n\t\t\t\tdtxt.innerHTML = d.detailText;\n\t\t\t\tbutton.addELM(dtxt);\n\n\t\t\t\texpand.addELM(button);\n\t\t\t}\n\t\t}\n\n\t\tvar a1 = cELM('div','arrow_up1');\n\t\texpand.addELM(a1);\n\n\t\tmain_button.onmousedown = function(e)\n\t\t{\n\t\t\tif(_isClosing)\n\t\t\t{\n\t\t\t\tclearTimeout(_closingTimer)\n\t\t\t\t_isClosing = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(_isShowing){\n\t\t\t\tconsole.log(e.target);\n\n\t\t\t\tif(e.target)\n\t\t\t\t{\n\t\t\t\t\tif(expand.contains(e.target) || main_button.contains(e.target))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn\t\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t_isShowing = false\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t_isShowing = false\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif(_params.onmousedown)\n\t\t\t\t_params.onmousedown(e);\n\n\t\t\tif(app.controls.expandButtons)\n\t\t\tfor(var i = 0; i < app.controls.expandButtons.length; i++)\n\t\t\t{\n\t\t\t\tvar item = app.controls.expandButtons[i];\n\t\t\t\tif(item == expand)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.handle)\n\t\t\t\t{\n\t\t\t\t\titem.handle('close-popover',e);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(item.style.display != 'none')\n\t\t\t\t\t  item.style.display = 'none';            \n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!e) var e = window.event;\n\t        \te.cancelBubble = true;\n\t    \tif (e.stopPropagation) e.stopPropagation();\n\t    \tif (e.preventDefault) e.preventDefault();\n\n\n\t\t\tif(expand.style.display == 'none')\n\t\t\t{\n\t\t\t\texpand.style.display = 'block';\n\t\t\t\t\n\t\t\t\tif(_params.mode)\n\t\t\t\tif(_params.mode == 'global')\n\t\t\t\t\tapp.Controller.showPopover(ExpandButton);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\texpand.style.display = 'none';\n\t\t\t}\n\n\t\t}\n\n\n\t\tExpandButton.onmousedown = function(e)\n\t\t{\n\t\t\tif(_isClosing)\n\t\t\t{\n\t\t\t\tclearTimeout(_closingTimer)\n\t\t\t\t_isClosing = false;\n\t\t\t}\n\t\t\tif(_showingTimer)\n\t\t\t\tclearTimeout(_showingTimer);\n\n\n\t\t\tmain_button.onmousedown(e);\n\t\t}\n\n\t\tif(_params.triggerOnMouseEnter)\n\t\t{\n\t\t\telm.onmouseenter = function(e){\n\t\t\t\tif(_closingTimer)\n\t\t\t\t\tclearTimeout(_closingTimer);\n\t\t\t\t_isClosing = false;\n\n\t\t\t\tif(_showingTimer)\n\t\t\t\t\tclearTimeout(_showingTimer);\n\n\t\t\t\tif(expand.style.display == 'none')\n\t\t\t\t{\n\t\t\t\t\t\n\n\t\t\t\t\t_showingTimer = setTimeout(function(){\n\t\t\t\t\t\tmain_button.onmousedown(e);\t\n\t\t\t\t\t\t//delay for mouse click\n\t\t\t\t\t\t_isShowing = true;\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t_isShowing = false;\n\t\t\t\t\t\t},1500)\n\t\t\t\t\t\t\n\t\t\t\t\t},200)\n\t\t\t\t}\n\t\t\t}\n\t\t\telm.onmouseleave = function(e){\n\t\t\t\tif(_closingTimer)\n\t\t\t\t\tclearTimeout(_closingTimer);\t\t\t\t\n\n\t\t\t\tif(_showingTimer)\n\t\t\t\t\tclearTimeout(_showingTimer);\t\n\n\t\t\t\tif(expand.style.display == 'block')\n\t\t\t\t{\n\t\t\t\t\t_closingTimer = setTimeout(function(){\n\t\t\t\t\t\t_isClosing = false;\n\t\t\t\t\t\t_isShowing = false;\n\t\t\t\t\t\tmain_button.onmousedown(e);\t\n\t\t\t\t\t},300);\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\texpand.onmouseleave = function(e)\n\t\t\t{\n\t\t\t\tif(_closingTimer)\n\t\t\t\t\tclearTimeout(_closingTimer);\n\t\t\t\t_isClosing = false;\n\t\t\t\t_isShowing = false;\n\n\n\t\t\t\tif(_showingTimer)\n\t\t\t\t\tclearTimeout(_showingTimer);\n\n\t\t\t\tif(expand.style.display == 'block')\n\t\t\t\t{\n\t\t\t\t\tmain_button.onmousedown(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(_params.autoClose){\n\t\t\texpand.onmouseenter = function(e){\n\t\t\t\tif(_closingTimer)\n\t\t\t\t\tclearTimeout(_closingTimer);\n\t\t\t\t_isClosing = false;\n\t\t\t}\n\t\t\texpand.onmouseleave = function(e)\n\t\t\t{\n\t\t\t\t_isClosing = true;\n\t\t\t\tif(expand.style.display == 'block')\n\t\t\t\t{\n\t\t\t\t\tif(_closingTimer)\n\t\t\t\t\t\tclearTimeout(_closingTimer);\n\n\t\t\t\t\t_closingTimer = setTimeout(function(){\n\t\t\t\t\t\t_isClosing = false;\n\t\t\t\t\t\tmain_button.onmousedown(e);\t\n\t\t\t\t\t},700);\n\t\t\t\t\t\n\t\t\t\t}\n\n\n\t\t\t}\t\n\t\t}\n\t\t\n\n\t\t//document.body.appendChild(elm);\n\t\tExpandButton.getControls = function(){\n\t\t\treturn expand;\n\t\t}\n\n\t\tExpandButton.getELM = function(){\n\t\t\treturn elm;\n\t\t}\n\t\tExpandButton.getParams = function(){\n\t\t\treturn _params;\n\t\t},\n\t\tExpandButton.handle = function(type,event){\n\n\t\t\t\tif(_closingTimer)\n\t\t\t\t\tclearTimeout(_closingTimer);\n\t\t\t\t_isClosing = false;\n\n\t\t\t\tswitch(type)\n\t\t\t\t{\n\t\t\t\t\tcase \"close-popover\":\n\t\t\t\t\t\texpand.style.display = 'none';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"document-mousedown\":\n\n\t\t\t\t\t\tif(_closingTimer)\n\t\t\t\t\t\t\tclearTimeout(_closingTimer);\n\t\t\t\t\t \n\t\t\t\t\t\tif(expand.style.display == 'block')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!event) var event = window.event;\n\t\t\t\t\t\t\t  event.cancelBubble = true;\n\t\t\t\t\t\t\tif (event.stopPropagation) event.stopPropagation();\n\t\t\t\t\t\t\tif (event.preventDefault) event.preventDefault();\n\n\t\t\t\t\t\t\tmain_button.onmousedown(event);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"window-resize\":\n\n\t\t\t\t\t\tif(_params.mode)\n\t\t\t\t\t\t\tif(_params.mode == 'global')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(_resizeTimer)\n\t\t\t\t\t\t\t\t\tclearTimeout(_resizeTimer);\n\n\t\t\t\t\t\t\t\t_resizeTimer = setTimeout(_onResize,1000);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"window-scroll\":\n\n\t\t\t\t\t\tif(_params.mode)\n\t\t\t\t\t\t\tif(_params.mode == 'global')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(_resizeTimer)\n\t\t\t\t\t\t\t\t\tclearTimeout(_resizeTimer);\n\n\t\t\t\t\t\t\t\t_resizeTimer = setTimeout(_onResize,1000);\n\n\t\t\t\t\t\t\t\t_onScroll(event);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\n\n\t\t},\n\t\tExpandButton.getHTML = function()\n\t\t{\n\t\t\texpand.handle = function(type,event){\n\t\t\t\tExpandButton.handle(type,event);\n\t\t\t}\n\t\t\tapp.Controller.registerExpand(ExpandButton);\n\n\t\t\telm.addELM(main_button);\n\t\t\t\n\t\t\tif(_params.mode)\n\t\t\tif(_params.mode == 'global')\n\t\t\t{\n\n\t\t\t\treturn elm;\n\t\t\t}\n\t\t\t\n\t\t\telm.addELM(expand)\n\t\t\t\n\t\t\treturn elm;\n\t\t\t\n\t\t}\n\n\n\treturn ExpandButton;\n\t},\n/*--------------------*/\nProgressBar:function(params){\n\tvar _this ={}\n\tvar _params = params;\n\n\tvar elm = cELM('div','progress');\n\tvar bar = cELM('div','progress-bar');\n\tvar barLabel = cELM('div','progress-bar-label');\n\t\n\t_this.update = function(percent)\n\t{\n\t\tbar.style.width = percent + '%';\n\t\tbarLabel.innerHTML = percent + '%';\n\t}\n\t_this.getELM = function()\n\t{\n\t\treturn elm;\n\t}\n\t_this.getHTML = function()\n\t{\n\n\t\telm.addELM(bar);\n\t\telm.addELM(barLabel);\n\n\t\n\t\treturn elm;\n\t}\n\n\treturn _this;\n},\n/*--------------------*/\nSegment:function(params){\n\tvar _this ={}\n\tvar _params = params;\n\n\tvar _elm = cELM('div','segments');\n\t\n\tvar _segElms = [];\n\t\t\n\n\tvar clearSelect = function()\n\t{\n\t\tfor(var i = 0; i < _segElms.length; i++)\n\t\t{\n\t\t\t_segElms[i].className = \"segment\";\n\t\t}\n\t}\n\n\n\tif(_params.segments)\n\t{\n\t\n\t \tfor(var i = 0; i < _params.segments.length; i++)\n\t \t{\n\t \t\t var segD = _params.segments[i];\n \n\t \t\t var sg = cELM('div','segment');\n\n\t \t\t if(i == 0)\n\t \t\t \tsg.className = 'segment selected';\n\n\t \t\t sg.innerHTML = segD.label;\n\t \t\t sg.value = segD.value;\n\t \t\t sg.onSelect = segD.onSelect;\n\t \t\t sg.onclick = function(e){\n\t \t\t \tclearSelect();\n\n\t\t\t\tthis.className = 'segment selected';\n\t\t\t\tthis.onSelect(this.value);\n\n\t \t\t }\n\n\n\n\t \t\t _elm.addELM(sg);\n\t \t\t _segElms.push(sg)\n\n\t \t}\n\t}\t \n\n\t_this.getELM = function()\n\t{ //just returns the main element\n\t\treturn _elm;\n\t},\n\t_this.getHTML = function()\n\t{ //build / render html elements here\n\n\t\treturn _elm;\n\t}\n\n\treturn _this;\n}\n\n}});"]}